<!DOCTYPE html><html><head>
      <title>practice</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////Users/ryan/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.6.5/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="devops-%EB%B0%8F-cicd-%EC%8B%A4%EC%8A%B5">DevOps &#xBC0F; CI/CD &#xC2E4;&#xC2B5;</h1>

<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-1-1-%EC%8B%A4%EC%8A%B5%EC%97%90-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B0%8F-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85">&#xC2E4;&#xC2B5; 1-1: &#xC2E4;&#xC2B5;&#xC5D0; &#xC0AC;&#xC6A9;&#xD558;&#xB294; &#xC11C;&#xBE44;&#xC2A4; &#xBC0F; &#xD68C;&#xC6D0;&#xAC00;&#xC785;</h2>

<ul>
<li>AWS: <a href="https://aws.amazon.com/ko/console/">https://aws.amazon.com/ko/console/</a></li>
<li>Github: <a href="https://github.com/">https://github.com/</a></li>
<li>&#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C;: <a href="https://hub.docker.com/">https://hub.docker.com/</a></li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-1-2-jenkins-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xC2E4;&#xC2B5; 1-2: Jenkins &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h2>

<h3 class="mume-header" id="%ED%82%A4-%ED%8E%98%EC%96%B4-%EC%83%9D%EC%84%B1">&#xD0A4; &#xD398;&#xC5B4; &#xC0DD;&#xC131;</h3>

<ul>
<li><a href="https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#KeyPairs:">https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#KeyPairs:</a></li>
<li>&#xC774;&#xB984;: sshkey</li>
<li>&#xAC1C;&#xC778; &#xD0A4; &#xB2E4;&#xC6B4;&#xB85C;&#xB4DC;</li>
</ul>
<h3 class="mume-header" id="%EB%B3%B4%EC%95%88-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1">&#xBCF4;&#xC548; &#xADF8;&#xB8F9; &#xC0DD;&#xC131;</h3>

<ul>
<li><a href="https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#SecurityGroups:">https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#SecurityGroups:</a></li>
<li>&#xC774;&#xB984;: allow-ssh-http</li>
<li>&#xADDC;&#xCE59;
<ul>
<li>SSH</li>
<li>HTTP</li>
<li>TCP/8080</li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xC820;&#xD0A8;&#xC2A4; &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h3>

<ul>
<li><a href="https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#Instances:">https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#Instances:</a></li>
<li>&#xC774;&#xB984;: Jenkins</li>
<li>AMI &#xC774;&#xBBF8;&#xC9C0;: Ubuntu 20.04</li>
<li>&#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC720;&#xD615;: t3.medium</li>
<li>&#xD0A4; &#xD398;&#xC5B4;: sshkey</li>
<li>&#xBC29;&#xD654;&#xBCBD;(&#xBCF4;&#xC548; &#xADF8;&#xB8F9;): allow-ssh-http</li>
</ul>
<h3 class="mume-header" id="ssh-%EC%A0%91%EC%86%8D-%ED%99%95%EC%9D%B8">SSH &#xC811;&#xC18D; &#xD655;&#xC778;</h3>

<p>&#xAC1C;&#xC778; &#xD0A4;&#xAC00; &#xC788;&#xB294; &#xB514;&#xB809;&#xD1A0;&#xB9AC;&#xB85C; &#xC774;&#xB3D9; &#xD6C4;</p>
<p>(&#xC635;&#xC158;) &#xC0AC;&#xC6A9;&#xD558;&#xB294; &#xC6B4;&#xC601;&#xCCB4;&#xC81C;&#xAC00; &#xC720;&#xB2C9;&#xC2A4;(&#xB9AC;&#xB205;&#xC2A4;, &#xB9E5;) &#xACC4;&#xC5F4;&#xC778; &#xACBD;&#xC6B0;, &#xAC1C;&#xC778; &#xD0A4; &#xD30C;&#xC77C;&#xC758; &#xAD8C;&#xD55C; &#xC124;&#xC815;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">chmod</span> <span class="token number">600</span> sshkey.pem
</pre><p>SSH &#xC811;&#xC18D; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">ssh</span> -i <span class="token string">&apos;sshkey.pem&apos;</span> ubuntu@<span class="token operator">&lt;</span>PUBLIC_IP<span class="token operator">&gt;</span>
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-1-3-git-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%A4%80%EB%B9%84%ED%8F%AC%ED%81%AC-%EB%B0%8F-%ED%81%B4%EB%A1%A0">&#xC2E4;&#xC2B5; 1-3: Git &#xC800;&#xC7A5;&#xC18C; &#xC900;&#xBE44;(&#xD3EC;&#xD06C; &#xBC0F; &#xD074;&#xB860;)</h2>

<p>&#xC6D0;&#xBCF8; &#xC18C;&#xC2A4; &#xC800;&#xC7A5;&#xC18C; &#xC8FC;&#xC18C;: <a href="https://github.com/c1t1d0s7/source-maven-java-spring-hello-webapp.git">https://github.com/c1t1d0s7/source-maven-java-spring-hello-webapp.git</a></p>
<h3 class="mume-header" id="%EC%A0%80%EC%9E%A5%EC%86%8C-%ED%8F%AC%ED%81%AC">&#xC800;&#xC7A5;&#xC18C; &#xD3EC;&#xD06C;</h3>

<p>&#xD3EC;&#xD06C; &#xBC29;&#xBC95; &#xCC38;&#xACE0;: <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo?tool=webui#forking-a-repository">https://docs.github.com/en/get-started/quickstart/fork-a-repo?tool=webui#forking-a-repository</a></p>
<h3 class="mume-header" id="%ED%91%B8%EC%8B%9C%EB%A5%BC-%EC%9C%84%ED%95%9C-ssh-%ED%82%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%93%B1%EB%A1%9D">&#xD478;&#xC2DC;&#xB97C; &#xC704;&#xD55C; SSH &#xD0A4; &#xC0DD;&#xC131; &#xBC0F; &#xB4F1;&#xB85D;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">ssh-keygen -t ed25519 -C <span class="token string">&quot;your_email@example.com&quot;</span>
</pre><p>SSH &#xD0A4; &#xC0DD;&#xC131; &#xCC38;&#xACE0;: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#generating-a-new-ssh-key">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#generating-a-new-ssh-key</a></p>
<p>SSH &#xD0A4; &#xB4F1;&#xB85D; &#xCC38;&#xACE0;: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#generating-a-new-ssh-key">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#generating-a-new-ssh-key</a></p>
<h3 class="mume-header" id="%ED%8F%AC%ED%81%AC%ED%95%9C-%EC%A0%80%EC%9E%A5%EC%86%8C-%ED%81%B4%EB%A1%A0">&#xD3EC;&#xD06C;&#xD55C; &#xC800;&#xC7A5;&#xC18C; &#xD074;&#xB860;</h3>

<p>&#xD074;&#xB860; &#xBC29;&#xBC95; &#xCC38;&#xACE0;: <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo?tool=webui#forking-a-repository">https://docs.github.com/en/get-started/quickstart/fork-a-repo?tool=webui#forking-a-repository</a></p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/git <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/git
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> clone git@github.com:<span class="token operator">&lt;</span>USERNAME<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>REPOSITORY<span class="token operator">&gt;</span>.git
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-1-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%ED%99%95%EC%9D%B8">&#xC2E4;&#xC2B5; 2-1: &#xC820;&#xD0A8;&#xC2A4; &#xC124;&#xCE58; &#xBC0F; &#xC778;&#xD130;&#xD398;&#xC774;&#xC2A4; &#xD655;&#xC778;</h2>

<h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90-%EC%A0%91%EC%86%8D%ED%95%B4-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%84%A4%EC%B9%98">&#xC820;&#xD0A8;&#xC2A4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; &#xC811;&#xC18D;&#xD574; &#xC820;&#xD0A8;&#xC2A4; &#xC124;&#xCE58;</h3>

<p>Java &#xC124;&#xCE58;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-11-jdk
</pre><p>&#xC800;&#xC7A5;&#xC18C; &#xC11C;&#xBA85; &#xD0A4; &#xC800;&#xC7A5;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> <span class="token punctuation">\</span>
  /usr/share/keyrings/jenkins-keyring.asc <span class="token operator">&gt;</span> /dev/null
</pre><p>&#xC800;&#xC7A5;&#xC18C; &#xCD94;&#xAC00;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">echo</span> deb <span class="token punctuation">[</span>signed-by<span class="token operator">=</span>/usr/share/keyrings/jenkins-keyring.asc<span class="token punctuation">]</span> <span class="token punctuation">\</span>
  https://pkg.jenkins.io/debian-stable binary/ <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> <span class="token punctuation">\</span>
  /etc/apt/sources.list.d/jenkins.list <span class="token operator">&gt;</span> /dev/null
</pre><p>&#xC820;&#xD0A8;&#xC2A4; &#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> jenkins
</pre><h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%B4%88%EA%B8%B0-%EA%B5%AC%EC%84%B1">&#xC820;&#xD0A8;&#xC2A4; &#xCD08;&#xAE30; &#xAD6C;&#xC131;</h3>

<p>&#xC820;&#xD0A8;&#xC2A4; &#xC811;&#xC18D;</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;PUBLIC_IP/PUBLIC_DNS&gt;:8080
</pre><p>&#xCD08;&#xAE30; &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">cat</span> /var/lib/jenkins/secrets/initialAdminPassword
</pre><h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%ED%99%95%EC%9D%B8">&#xC820;&#xD0A8;&#xC2A4; &#xB300;&#xC2DC;&#xBCF4;&#xB4DC; &#xC778;&#xD130;&#xD398;&#xC774;&#xC2A4; &#xD655;&#xC778;</h3>

<p>&#xAE00;&#xB85C;&#xBC8C; &#xB3C4;&#xAD6C;: <code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; Global Tool Configuration</code></p>
<p>&#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xAD00;&#xB9AC;: <code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xAD00;&#xB9AC;</code></p>
<p>&#xC790;&#xACA9;&#xC99D;&#xBA85;: <code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; Manage Credentials</code></p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-2-freestyle-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8">&#xC2E4;&#xC2B5; 2-2: Freestyle &#xD504;&#xB85C;&#xC81D;&#xD2B8;</h2>

<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%83%9D%EC%84%B1">&#xC791;&#xC5C5; &#xC0DD;&#xC131;</h3>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>test_project</code></li>
<li><code>Freestyle project</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>&#xC18C;&#xC2A4; &#xCF54;&#xB4DC; &#xAD00;&#xB9AC;: <code>Git</code>
<ul>
<li>Repository URL: <code>&lt;YOUR_REPOSITORY&gt;</code></li>
<li>Branch Specifier: <code>*/main</code></li>
</ul>
</li>
<li>Build Steps
<ul>
<li>Execute Shell
<ul>
<li>Command
<ul>
<li><code>echo &quot;hello world&quot; &gt; hello.txt</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
<li><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></li>
<li>Build History: <code>#1</code> &gt; <code>Console Output</code> &#xD655;&#xC778;</li>
</ul>
<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%ED%99%95%EC%9D%B8">&#xC791;&#xC5C5; &#xD655;&#xC778;</h3>

<p>&#xC820;&#xD0A8;&#xC2A4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;:</p>
<ul>
<li><code>/var/lib/jenkins/workspace/test_project</code> &#xB514;&#xB809;&#xD1A0;&#xB9AC; &#xD655;&#xC778;</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-3-maven-%EC%84%A4%EC%B9%98-%EB%B0%8F-maven-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8">&#xC2E4;&#xC2B5; 2-3: Maven &#xC124;&#xCE58; &#xBC0F; Maven &#xD504;&#xB85C;&#xC81D;&#xD2B8;</h2>

<h3 class="mume-header" id="maven-%EC%84%A4%EC%B9%98">Maven &#xC124;&#xCE58;</h3>

<p>Maven &#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> maven
</pre><h3 class="mume-header" id="jdk-maven-%EA%B8%80%EB%A1%9C%EB%B2%8C-%EB%8F%84%EA%B5%AC-%EC%84%A4%EC%A0%95">JDK, Maven &#xAE00;&#xB85C;&#xBC8C; &#xB3C4;&#xAD6C; &#xC124;&#xC815;</h3>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; Global Tool Configuration</code></p>
<ul>
<li>JDK
<ul>
<li>Name: java-11</li>
<li>Install automatically &#xD574;&#xC81C;</li>
<li>JAVA_HOME: <code>/usr/lib/jvm/java-11-openjdk-amd64/</code></li>
</ul>
</li>
<li>Maven
<ul>
<li>Name: Maven-3</li>
<li>Install automatically &#xD574;&#xC81C;</li>
<li>MAVEN_HOME: <code>/usr/share/maven</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98">&#xC820;&#xD0A8;&#xC2A4; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xC124;&#xCE58;</h3>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xAD00;&#xB9AC;</code></p>
<ul>
<li>&#xC124;&#xCE58; &#xAC00;&#xB2A5; &gt; <code>Maven Intergration</code></li>
</ul>
<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%83%9D%EC%84%B1-1">&#xC791;&#xC5C5; &#xC0DD;&#xC131;</h3>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>maven_project</code></li>
<li><code>Maven project</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>&#xC18C;&#xC2A4; &#xCF54;&#xB4DC; &#xAD00;&#xB9AC;: <code>Git</code>
<ul>
<li>Repository URL: <code>&lt;YOUR_REPOSITORY&gt;</code></li>
<li>Branch Specifier: <code>*/main</code></li>
</ul>
</li>
<li>Build
<ul>
<li>Root POM: <code>pom.xml</code></li>
<li>Goals and options: <code>clean package</code></li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
<li><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></li>
<li>Build History: <code>#1</code> &gt; <code>Console Output</code> &#xD655;&#xC778;</li>
<li>&#xC791;&#xC5C5;&#xACF5;&#xAC04; &#xD655;&#xC778;</li>
</ul>
<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%ED%99%95%EC%9D%B8-1">&#xC791;&#xC5C5; &#xD655;&#xC778;</h3>

<ul>
<li><code>/var/lib/jenkins/workspace/maven_project</code> &#xB514;&#xB809;&#xD1A0;&#xB9AC; &#xD655;&#xC778;</li>
<li><code>/var/lib/jenkins/workspace/maven_project/target</code> &#xB514;&#xB809;&#xD1A0;&#xB9AC; &#xD655;&#xC778; &#xBC0F; <code>hello-word.war</code> &#xD30C;&#xC77C; &#xD655;&#xC778;</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-4-tomcat-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-tomcat-%EA%B5%AC%EC%84%B1-%EB%B0%8F-maven-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8">&#xC2E4;&#xC2B5; 2-4: Tomcat &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131; &#xBC0F; Tomcat &#xAD6C;&#xC131; &#xBC0F; Maven &#xD504;&#xB85C;&#xC81D;&#xD2B8;</h2>

<h3 class="mume-header" id="tomcat-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">Tomcat &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h3>

<ul>
<li>Tomcat &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;
<ul>
<li>&#xC774;&#xB984;: Tomcat</li>
<li>AMI &#xC774;&#xBBF8;&#xC9C0;: Ubuntu 20.04</li>
<li>&#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC720;&#xD615;: t3.small</li>
<li>&#xD0A4; &#xD398;&#xC5B4;: sshkey</li>
<li>&#xBC29;&#xD654;&#xBCBD;(&#xBCF4;&#xC548; &#xADF8;&#xB8F9;): allow-ssh-http</li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="tomcat-%EC%84%A4%EC%B9%98">Tomcat &#xC124;&#xCE58;</h3>

<p>Tomcat &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC811;&#xC18D;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> tomcat9 tomcat9-admin
</pre><h3 class="mume-header" id="tomcat-manager-%EA%B5%AC%EC%84%B1">Tomcat Manager &#xAD6C;&#xC131;</h3>

<p><code>/etc/tomcat9/tomcat-users.xml</code></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tomcat-users</span><span class="token punctuation">&gt;</span></span>
...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span> <span class="token attr-name">rolename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-gui<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span> <span class="token attr-name">rolename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-script<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span> <span class="token attr-name">rolename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-jmx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span> <span class="token attr-name">rolename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-status<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span> <span class="token attr-name">username</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>P@ssw0rd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">roles</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-gui, manager-script, manager-jmx, manager-status<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tomcat-users</span><span class="token punctuation">&gt;</span></span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> systemctl restart tomcat9
</pre><h2 class="mume-header" id="tomcat-%EB%B0%8F-tomcat-manager-%EC%A0%91%EC%86%8D-%ED%99%95%EC%9D%B8">Tomcat &#xBC0F; Tomcat Manager &#xC811;&#xC18D; &#xD655;&#xC778;</h2>

<p>Tomcat &#xC811;&#xC18D; &#xC8FC;&#xC18C;<br>
<code>http://&lt;TOMCAT_ADDRESS&gt;:8080/</code></p>
<p>Tomcat Manager<br>
<code>http://&lt;TOMCAT_ADDRESS&gt;:8080/manager/html</code></p>
<h2 class="mume-header" id="tomcat-%EB%B0%B0%ED%8F%AC-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98">Tomcat &#xBC30;&#xD3EC; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xC124;&#xCE58;</h2>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xAD00;&#xB9AC;</code></p>
<ul>
<li>&#xC124;&#xCE58; &#xAC00;&#xB2A5; &gt; <code>Deploy to container</code></li>
</ul>
<h2 class="mume-header" id="tomcat-manager-%EC%9E%90%EA%B2%A9%EC%A6%9D%EB%AA%85-%EA%B5%AC%EC%84%B1">Tomcat Manager &#xC790;&#xACA9;&#xC99D;&#xBA85; &#xAD6C;&#xC131;</h2>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; Manage Credentials</code></p>
<ul>
<li><code>(gobal)</code> &#xC120;&#xD0DD;</li>
<li><code>Add Credentials</code> &#xC120;&#xD0DD;
<ul>
<li>Kind: <code>Username with password</code>
<ul>
<li>Username: <code>admin</code></li>
<li>Password: <code>P@ssw0rd</code></li>
<li>ID: <code>tomcat-manager</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%88%98%EC%A0%95">&#xC791;&#xC5C5; &#xC218;&#xC815;</h2>

<p><code>Dashboard &gt; maven_project &gt; &#xAD6C;&#xC131;</code></p>
<ul>
<li>&#xBE4C;&#xB4DC; &#xD6C4; &#xC870;&#xCE58;
<ul>
<li>Deploy war/war to a container
<ul>
<li>WAR/EAR files: <code>target/hello-world.war</code></li>
<li>Containers
<ul>
<li>Tomcat 9.X Remote
<ul>
<li>Credentials: <code>admin/*****</code></li>
<li>Tomcat URL: <code>http://&lt;TOMCAT_IP&gt;:8080/</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</li>
<li>Build History: <code>#1</code> &gt; <code>Console Output</code> &#xD655;&#xC778;</li>
<li>&#xC791;&#xC5C5;&#xACF5;&#xAC04; &#xD655;&#xC778;</li>
</ul>
<h2 class="mume-header" id="%EB%B0%B0%ED%8F%AC-%ED%99%95%EC%9D%B8">&#xBC30;&#xD3EC; &#xD655;&#xC778;</h2>

<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;TOMCAT_ADDRESS&gt;:8080/hello-world/
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-5-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B8%B0%EB%B3%B8">&#xC2E4;&#xC2B5; 2-5: &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xAE30;&#xBCF8;</h2>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>test_pipeline</code></li>
<li><code>Pipeline</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>Pipeline
<ul>
<li>Definition: <code>Pipeline script</code>
<ul>
<li>Script: <code>Hello World</code></li>
</ul>
</li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
<li><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></li>
<li>Build History: <code>#1</code> &gt; <code>Console Output</code> &#xD655;&#xC778;</li>
<li>&#xC791;&#xC5C5;&#xACF5;&#xAC04; &#xD655;&#xC778;</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-6-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-maven-tomcat-%EC%9E%91%EC%97%85-%EA%B5%AC%EC%84%B1">&#xC2E4;&#xC2B5; 2-6: &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; + Maven + Tomcat &#xC791;&#xC5C5; &#xAD6C;&#xC131;</h2>

<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%83%9D%EC%84%B1-2">&#xC791;&#xC5C5; &#xC0DD;&#xC131;</h3>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>maven_pipeline_tomcat</code></li>
<li><code>Pipeline</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>Pipeline
<ul>
<li>Definition: <code>Pipeline script from SCM</code>
<ul>
<li>SCM: <code>Git</code>
<ul>
<li>Repository URL: <code>&lt;YOUR_REPOSITORY&gt;</code></li>
<li>Branch Scpecifier: <code>*/main</code></li>
</ul>
</li>
<li>Script Path: <code>Jenkinsfile</code></li>
</ul>
</li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="jenkinsfile-%EC%83%9D%EC%84%B1">Jenkinsfile &#xC0DD;&#xC131;</h3>

<p>Git &#xC800;&#xC7A5;&#xC18C;&#xC5D0; <code>Jenkinsfile</code> &#xC0DD;&#xC131;</p>
<p><code>Jenkinsfile</code></p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any

  triggers <span class="token punctuation">{</span>
    <span class="token function">pollSCM</span><span class="token punctuation">(</span><span class="token string">&apos;* * * * *&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Checkout&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        git branch<span class="token punctuation">:</span> <span class="token string">&apos;main&apos;</span><span class="token punctuation">,</span> 
        url<span class="token punctuation">:</span> <span class="token string">&apos;&lt;URL&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Test&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Deploy&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        deploy adapters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">tomcat9</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">&apos;&lt;NAME&gt;&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;&lt;URL&gt;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> contextPath<span class="token punctuation">:</span> null<span class="token punctuation">,</span> war<span class="token punctuation">:</span> <span class="token string">&apos;path/to/war&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Git &#xC800;&#xC7A5;&#xC18C; &#xD478;&#xC2DC;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><h3 class="mume-header" id="%EB%B0%B0%ED%8F%AC-%ED%99%95%EC%9D%B8-1">&#xBC30;&#xD3EC; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;TOMCAT_ADDRESS&gt;:8080/hello-world/
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-7-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EB%85%B8%EB%93%9C%EC%8A%AC%EB%A0%88%EC%9D%B4%EB%B8%8C-%EA%B5%AC%EC%84%B1">&#xC2E4;&#xC2B5; 2-7: &#xC820;&#xD0A8;&#xC2A4; &#xB178;&#xB4DC;(&#xC2AC;&#xB808;&#xC774;&#xBE0C;) &#xAD6C;&#xC131;</h2>

<h3 class="mume-header" id="jenkins-node-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">Jenkins-node &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h3>

<ul>
<li>&#xC820;&#xD0A8;&#xC2A4; &#xB178;&#xB4DC;(&#xC2AC;&#xB808;&#xC774;&#xBE0C;) &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;
<ul>
<li>&#xC774;&#xB984;: Jenkins-node</li>
<li>AMI &#xC774;&#xBBF8;&#xC9C0;: Ubuntu 20.04</li>
<li>&#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC720;&#xD615;: t3.small</li>
<li>&#xD0A4; &#xD398;&#xC5B4;: sshkey</li>
<li>&#xBC29;&#xD654;&#xBCBD;(&#xBCF4;&#xC548; &#xADF8;&#xB8F9;): allow-ssh-http</li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="jenkins-node-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EA%B5%AC%EC%84%B1">Jenkins-node &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xAD6C;&#xC131;</h3>

<p>Jenkins-node&#xC5D0; SSH &#xC811;&#xC18D;</p>
<p>OpenJDK &#xBC0F; Maven &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-11-jdk maven
</pre><p>Jenkins &#xC0AC;&#xC6A9;&#xC790; &#xC0DD;&#xC131;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">useradd</span> jenkins -d /var/lib/jenkins -m -s /bin/bash
</pre><p>Jenkins &#xC0AC;&#xC6A9;&#xC790; &#xD328;&#xC2A4;&#xC6CC;&#xB4DC;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">passwd</span> jenkins
</pre><p>SSH &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xC778;&#xC99D; &#xD5C8;&#xC6A9;:</p>
<p><code>/etc/ssh/sshd_config</code></p>
<pre data-role="codeBlock" data-info="text" class="language-text"> 58 PasswordAuthentication yes
</pre><p>SSH &#xC11C;&#xBE44;&#xC2A4; &#xC7AC;&#xC2DC;&#xC791;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> systemctl restart <span class="token function">ssh</span>
</pre><h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%97%90%EC%84%9C-%EB%85%B8%EB%93%9C%EC%8A%AC%EB%A0%88%EC%9D%B4%EB%B8%8C%EB%A1%9C-ssh-%EC%A0%91%EC%86%8D-%ED%99%95%EC%9D%B8">&#xC820;&#xD0A8;&#xC2A4; &#xC2DC;&#xC2A4;&#xD15C;&#xC5D0;&#xC11C; &#xB178;&#xB4DC;(&#xC2AC;&#xB808;&#xC774;&#xBE0C;)&#xB85C; SSH &#xC811;&#xC18D; &#xD655;&#xC778;</h3>

<p>&#xC820;&#xD0A8;&#xC2A4; &#xC2DC;&#xC2A4;&#xD15C;&#xC5D0; SSH &#xC811;&#xC18D;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> -u jenkins <span class="token function">ssh</span> jenkins@<span class="token operator">&lt;</span>JENKINS_NODE_PRIVATE_IP<span class="token operator">&gt;</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">exit</span>
</pre><h3 class="mume-header" id="%EC%8B%A0%EA%B7%9C-%EB%85%B8%EB%93%9C-%EC%B6%94%EA%B0%80">&#xC2E0;&#xADDC; &#xB178;&#xB4DC; &#xCD94;&#xAC00;</h3>

<p><code>Dashboard &gt; Nodes</code></p>
<ul>
<li>&#xB178;&#xB4DC;&#xBA85;: <code>jenkins-node</code></li>
<li>Permanenet Agent &#xCCB4;&#xD06C;
<ul>
<li>Name: <code>Jenkins-node</code></li>
<li>Remote root directory: <code>/var/lib/jenkins</code></li>
<li>Labels: <code>jenkins-node</code></li>
<li>Launch method: <code>Launch agent via SSH</code>
<ul>
<li>Host: `&lt;JENKINS_NODE_PRIVATE_IP&gt;</li>
<li>Credentials
<ul>
<li><code>Add</code> &gt; <code>Jenkins</code>
<ul>
<li>Kind: <code>Username with password</code>
<ul>
<li>Username: <code>jenkins</code></li>
<li>Password: <code>&lt;PASSWORD&gt;</code></li>
<li>ID: <code>jenkins-node-ssh</code></li>
</ul>
</li>
</ul>
</li>
<li>&#xC0DD;&#xC131;&#xD55C; &#xC790;&#xACA9; &#xC99D;&#xBA85; &#xC120;&#xD0DD;</li>
</ul>
</li>
</ul>
</li>
<li><code>Save</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="%EB%A0%88%EC%9D%B4%EB%B8%94%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-jenkinsfile-%EC%88%98%EC%A0%95">&#xB808;&#xC774;&#xBE14;&#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xB3C4;&#xB85D; Jenkinsfile &#xC218;&#xC815;</h3>

<p><code>Jenkinsfile</code></p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">pipeline <span class="token punctuation">{</span>
    agent <span class="token punctuation">{</span>
      label <span class="token string">&quot;jenkins-node&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">...</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><h3 class="mume-header" id="%EC%9E%91%EC%97%85-%ED%99%95%EC%9D%B8-2">&#xC791;&#xC5C5; &#xD655;&#xC778;</h3>

<p><code>Dashboard &gt; maven_pipeline_tomcat</code></p>
<p>&#xD574;&#xB2F9; &#xC791;&#xC5C5;&#xC5D0;&#xC11C; &#xCF58;&#xC194; &#xCD9C;&#xB825; &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="text" class="language-text">...
Running on jenkins-node in /var/lib/jenkins/workspace/maven_pipeline_tomcat
...
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-2-8-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%A0%95%EB%A6%AC">&#xC2E4;&#xC2B5; 2-8: &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC815;&#xB9AC;</h2>

<p>Jenkins, Tomcat, Jenkins-node &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0AD;&#xC81C;</p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-1-%EB%8F%84%EC%BB%A4-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xC2E4;&#xC2B5; 3-1: &#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h2>

<ul>
<li>&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;
<ul>
<li>&#xC774;&#xB984;: Docker</li>
<li>AMI &#xC774;&#xBBF8;&#xC9C0;: Ubuntu 20.04</li>
<li>&#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC720;&#xD615;: t3.medium</li>
<li>&#xD0A4; &#xD398;&#xC5B4;: sshkey</li>
<li>&#xBC29;&#xD654;&#xBCBD;(&#xBCF4;&#xC548; &#xADF8;&#xB8F9;): allow-ssh-http</li>
<li>&#xC2A4;&#xD1A0;&#xB9AC;&#xC9C0; &#xAD6C;&#xC131;: <strong>30 GB</strong></li>
</ul>
</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-2-%EB%8F%84%EC%BB%A4-%EC%84%A4%EC%B9%98">&#xC2E4;&#xC2B5; 3-2: &#xB3C4;&#xCEE4; &#xC124;&#xCE58;</h2>

<p>&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xC811;&#xC18D;</p>
<p>&#xB3C4;&#xCEE4; &#xC124;&#xCE58;: <a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p>
<h3 class="mume-header" id="%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EB%B0%8F-%EA%B8%B0%EB%B3%B8-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98">&#xC778;&#xB371;&#xC2A4; &#xC5C5;&#xB370;&#xC774;&#xD2B8; &#xBC0F; &#xAE30;&#xBCF8; &#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ca-certificates <span class="token function">curl</span> gnupg lsb-release
</pre><h3 class="mume-header" id="gpg%ED%82%A4-%EC%84%A4%EC%B9%98">GPG&#xD0A4; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/apt/keyrings
<span class="token function">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</pre><h3 class="mume-header" id="%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%84%A4%EC%A0%95">&#xD328;&#xD0A4;&#xC9C0; &#xC800;&#xC7A5;&#xC18C; &#xC124;&#xC815;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">echo</span> <span class="token punctuation">\</span>
  <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
</pre><h3 class="mume-header" id="%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98">&#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</pre><h3 class="mume-header" id="%EC%9D%BC%EB%B0%98-%EC%82%AC%EC%9A%A9%EC%9E%90%EC%97%90%EA%B2%8C-docker-%EB%AA%85%EB%A0%B9-%EC%8B%A4%ED%96%89-%EA%B6%8C%ED%95%9C-%EB%B6%80%EC%97%AC">&#xC77C;&#xBC18; &#xC0AC;&#xC6A9;&#xC790;&#xC5D0;&#xAC8C; docker &#xBA85;&#xB839; &#xC2E4;&#xD589; &#xAD8C;&#xD55C; &#xBD80;&#xC5EC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token environment constant">$USER</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">exit</span>
</pre><p>SSH &#xC7AC;&#xC811;&#xC18D;</p>
<h3 class="mume-header" id="%EB%AA%85%EB%A0%B9-%EC%8B%A4%ED%96%89-%ED%85%8C%EC%8A%A4%ED%8A%B8">&#xBA85;&#xB839; &#xC2E4;&#xD589; &#xD14C;&#xC2A4;&#xD2B8;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">docker container <span class="token function">ls</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker run hello-world
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-3-%EB%8F%84%EC%BB%A4-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B4%80%EB%A0%A8-%EB%AA%85%EB%A0%B9-%EC%8B%A4%EC%8A%B5">&#xC2E4;&#xC2B5; 3-3: &#xB3C4;&#xCEE4; &#xC774;&#xBBF8;&#xC9C0; &#xAD00;&#xB828; &#xBA85;&#xB839; &#xC2E4;&#xC2B5;</h2>

<p>&#xC774;&#xBBF8;&#xC9C0; &#xAC80;&#xC0C9;: <code>docker search TERM</code><br>
&#xC774;&#xBBF8;&#xC9C0; &#xBAA9;&#xB85D;: <code>docker image ls</code><br>
&#xC774;&#xBBF8;&#xC9C0; &#xD480;: <code>docker image pull NAME[:TAG|@DIGEST]</code><br>
&#xC774;&#xBBF8;&#xC9C0; &#xD478;&#xC2DC;: <code>docker image push NAME[:TAG]</code><br>
&#xC774;&#xBBF8;&#xC9C0; &#xD0DC;&#xADF8;: <code>docker image tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</code><br>
&#xC774;&#xBBF8;&#xC9C0; &#xC0AD;&#xC81C;: <code>docker image rm IMAGE</code><br>
&#xD0DC;&#xADF8;&#xAC00; &#xC5C6;&#xB294; &#xC774;&#xBBF8;&#xC9C0; &#xC0AD;&#xC81C;: <code>docker image prune</code><br>
&#xC774;&#xBBF8;&#xC9C0; &#xC0C1;&#xC138; &#xC815;&#xBCF4;: <code>docker image inspect IMAGE</code><br>
&#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C; &#xB85C;&#xADF8;&#xC778;: <code>docker login</code><br>
&#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C; &#xB85C;&#xADF8;&#xC544;&#xC6C3;: <code>docker logout</code></p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-4-%EB%8F%84%EC%BB%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EA%B4%80%EB%A0%A8-%EC%8B%A4%EC%8A%B5">&#xC2E4;&#xC2B5; 3-4: &#xB3C4;&#xCEE4; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xAD00;&#xB828; &#xC2E4;&#xC2B5;</h2>

<p>&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC2E4;&#xD589;: <code>docker container run</code><br>
&#xCEE8;&#xB124;&#xC774;&#xB108; &#xC911;&#xC9C0;: <code>docker container stop</code><br>
&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC0AD;&#xC81C;: <code>docker container rm</code><br>
&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xBAA9;&#xB85D;: <code>docker container ls</code><br>
&#xCEE8;&#xD14C;&#xC774;&#xB108;&#xC758; &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xBAA9;&#xB85D;: <code>docker container top</code><br>
&#xCEE8;&#xD14C;&#xC774;&#xB108;&#xC758; &#xB9AC;&#xC18C;&#xC2A4; &#xC0AC;&#xC6A9;&#xB7C9; &#xD655;&#xC778;: <code>docker container stats</code><br>
&#xCEE8;&#xD14C;&#xC774;&#xB108;&#xC758; &#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xB85C;&#xADF8; &#xD655;&#xC778;: <code>docker container logs</code><br>
&#xC2E4;&#xD589;&#xC911;&#xC778; &#xCEE8;&#xD14C;&#xC774;&#xB108;&#xC5D0; &#xBA85;&#xB839; &#xC2E4;&#xD589;: <code>docker container exec</code><br>
&#xC815;&#xC9C0;&#xB41C; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC0AD;&#xC81C;: <code>docker container prune</code></p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-5-wordpress-cms-%EA%B5%AC%EC%84%B1">&#xC2E4;&#xC2B5; 3-5: Wordpress CMS &#xAD6C;&#xC131;</h2>

<ul>
<li>Wordpress &#xC774;&#xBBF8;&#xC9C0;: <a href="https://hub.docker.com/_/wordpress">https://hub.docker.com/_/wordpress</a></li>
<li>MySQL &#xC774;&#xBBF8;&#xC9C0;: <a href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a></li>
</ul>
<pre data-role="codeBlock" data-info="bash" class="language-bash">docker network create wp-net
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker run -d --name wp-db <span class="token punctuation">\</span>
	--net wp-net <span class="token punctuation">\</span>
	-v wp-db-vol:/var/lib/mysql <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>P@ssw0rd <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">MYSQL_DATABASE</span><span class="token operator">=</span>wordprpress <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">MYSQL_USER</span><span class="token operator">=</span>wpadmin <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">MYSQL_PASSWORD</span><span class="token operator">=</span>P@ssw0rd <span class="token punctuation">\</span>
	mysql:5.7
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker run -d --name wp-web <span class="token punctuation">\</span>
	--net wp-net <span class="token punctuation">\</span>
	-v wp-web-vol:/var/www/html <span class="token punctuation">\</span>
	--link wp-db:wp-mysql <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">WORDPRESS_DB_HOST</span><span class="token operator">=</span>wp-mysql <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">WORDPRESS_DB_USER</span><span class="token operator">=</span>wpadmin <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">WORDPRESS_DB_NAME</span><span class="token operator">=</span>wordpress <span class="token punctuation">\</span>
	-e <span class="token assign-left variable">WORDPRESS_DB_PASSWORD</span><span class="token operator">=</span>P@ssw0rd <span class="token punctuation">\</span>
	-p <span class="token number">80</span>:80 <span class="token punctuation">\</span>
	wordpress:latest
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-6-tomcat-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B9%8C%EB%93%9C-%EB%B0%8F-%EC%8B%A4%ED%96%89">&#xC2E4;&#xC2B5; 3-6: Tomcat &#xC774;&#xBBF8;&#xC9C0; &#xBE4C;&#xB4DC; &#xBC0F; &#xC2E4;&#xD589;</h2>

<p>&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xC811;&#xC18D;</p>
<h3 class="mume-header" id="github-%EC%A0%80%EC%9E%A5%EC%86%8C%EC%9D%98-%EC%86%8C%EC%8A%A4-%EB%B9%8C%EB%93%9C-%ED%9B%84-war-%ED%8C%8C%EC%9D%BC%EC%9D%84-%ED%8F%AC%ED%95%A8%ED%95%98%EB%8A%94-tomcat-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B9%8C%EB%93%9C">GitHub &#xC800;&#xC7A5;&#xC18C;&#xC758; &#xC18C;&#xC2A4; &#xBE4C;&#xB4DC; &#xD6C4; <code>WAR</code> &#xD30C;&#xC77C;&#xC744; &#xD3EC;&#xD568;&#xD558;&#xB294; Tomcat &#xC774;&#xBBF8;&#xC9C0; &#xBE4C;&#xB4DC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/myweb <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/myweb
</pre><p><code>Dockerfile</code></p>
<pre data-role="codeBlock" data-info="dockerfile" class="language-dockerfile"><span class="token instruction"><span class="token keyword keyword-FROM">FROM</span> maven:3-openjdk-8 <span class="token keyword keyword-AS">AS</span> mbuilder</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> mkdir /hello</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> git clone &lt;URL&gt; /hello</span>
<span class="token instruction"><span class="token keyword keyword-WORKDIR">WORKDIR</span> /hello</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> mvn package</span>

<span class="token instruction"><span class="token keyword keyword-FROM">FROM</span> tomcat:9-jre8</span>
<span class="token instruction"><span class="token keyword keyword-COPY">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">mbuilder</span></span> /hello/target/hello-world.war /usr/local/tomcat/webapps/</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker image build -t myhello <span class="token builtin class-name">.</span>
</pre><h3 class="mume-header" id="%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%8B%A4%ED%96%89-%EB%B0%8F-%EA%B2%80%EC%A6%9D">&#xC774;&#xBBF8;&#xC9C0; &#xC2E4;&#xD589; &#xBC0F; &#xAC80;&#xC99D;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">docker container run -d -p <span class="token number">80</span>:8080 -n myweb myhello
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://localhost/hello-world/
</pre><p>&#xC6F9; &#xBE0C;&#xB77C;&#xC6B0;&#xC800;:</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;DOCKER_PUBLIC_IP/DNS&gt;/hello-world/
</pre><p>&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC815;&#xC9C0; &#xBC0F; &#xC0AD;&#xC81C;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">docker container stop myweb
docker container <span class="token function">rm</span> myweb
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-7-%EB%8F%84%EC%BB%A4%EC%97%90-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EB%8F%84%EC%BB%A4-%EC%97%90%EC%9D%B4%EC%A0%84%ED%8A%B8-%EA%B5%AC%EC%84%B1">&#xC2E4;&#xC2B5; 3-7: &#xB3C4;&#xCEE4;&#xC5D0; &#xC820;&#xD0A8;&#xC2A4; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC124;&#xCE58; &#xBC0F; &#xB3C4;&#xCEE4; &#xC5D0;&#xC774;&#xC804;&#xD2B8; &#xAD6C;&#xC131;</h2>

<p><a href="https://www.jenkins.io/doc/book/installing/docker/">https://www.jenkins.io/doc/book/installing/docker/</a></p>
<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4%EC%97%90-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%84%A4%EC%B9%98">&#xB3C4;&#xCEE4;&#xC5D0; &#xC820;&#xD0A8;&#xC2A4; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/install_jenkins <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/install_jenkins
</pre><p><code>jenkins</code> &#xB3C4;&#xCEE4; &#xB124;&#xD2B8;&#xC6CC;&#xD06C; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">docker network create jenkins
</pre><p>DinD(Docker in Docker) &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC2E4;&#xD589;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">docker run --name docker-dind --detach <span class="token punctuation">\</span>
  --privileged --network jenkins --network-alias docker <span class="token punctuation">\</span>
  --env <span class="token assign-left variable">DOCKER_TLS_CERTDIR</span><span class="token operator">=</span>/certs <span class="token punctuation">\</span>
  --volume jenkins-docker-certs:/certs/client <span class="token punctuation">\</span>
  --volume jenkins-data:/var/jenkins_home <span class="token punctuation">\</span>
  --volume docker:/var/lib/docker <span class="token punctuation">\</span>
  --publish <span class="token number">2376</span>:2376 <span class="token punctuation">\</span>
  --restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
  docker:dind --storage-driver overlay2
</pre><p><code>Dockerfile</code></p>
<pre data-role="codeBlock" data-info="Dockerfile" class="language-dockerfile"><span class="token instruction"><span class="token keyword keyword-FROM">FROM</span> jenkins/jenkins:lts-jdk11</span>
<span class="token instruction"><span class="token keyword keyword-USER">USER</span> root</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> apt-get update &amp;&amp; apt-get install -y lsb-release</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> curl -fsSLo /usr/share/keyrings/docker-archive-keyring.asc <span class="token operator">\</span>
  https://download.docker.com/linux/debian/gpg</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> echo <span class="token string">&quot;deb [arch=$(dpkg --print-architecture) \
  signed-by=/usr/share/keyrings/docker-archive-keyring.asc] \
  https://download.docker.com/linux/debian \
  $(lsb_release -cs) stable&quot;</span> &gt; /etc/apt/sources.list.d/docker.list</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> apt-get update &amp;&amp; apt-get install -y docker-ce-cli</span>
<span class="token instruction"><span class="token keyword keyword-USER">USER</span> jenkins</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> jenkins-plugin-cli --plugins <span class="token string">&quot;docker-plugin docker-workflow&quot;</span></span>
</pre><p><code>docker</code> &#xBA85;&#xB839;&#xC774; &#xD3EC;&#xD568;&#xB41C; Jenkins &#xC774;&#xBBF8;&#xC9C0; &#xBE4C;&#xB4DC;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">docker image build -t jenkins-docker:lts-jdk11 <span class="token builtin class-name">.</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker run --name jenkins-docker <span class="token punctuation">\</span>
  --restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
  --detach <span class="token punctuation">\</span>
  --network jenkins <span class="token punctuation">\</span>
  --env <span class="token assign-left variable">DOCKER_HOST</span><span class="token operator">=</span>tcp://docker:2376 <span class="token punctuation">\</span>
  --env <span class="token assign-left variable">DOCKER_CERT_PATH</span><span class="token operator">=</span>/certs/client <span class="token punctuation">\</span>
  --env <span class="token assign-left variable">DOCKER_TLS_VERIFY</span><span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">\</span>
  --publish <span class="token number">8080</span>:8080 <span class="token punctuation">\</span>
  --publish <span class="token number">50000</span>:50000 <span class="token punctuation">\</span>
  --volume jenkins-data:/var/jenkins_home <span class="token punctuation">\</span>
  --volume jenkins-docker-certs:/certs/client:ro <span class="token punctuation">\</span>
  jenkins-docker:lts-jdk11
</pre><p>&#xC820;&#xD0A8;&#xC2A4; &#xB300;&#xC2DC;&#xBCF4;&#xB4DC; &#xC811;&#xC18D;</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;DOCKER_PUBLIC_IP/DNS&gt;:8080
</pre><p>&#xC820;&#xD0A8;&#xC2A4; &#xC5B8;&#xB77D;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">docker <span class="token builtin class-name">exec</span> jenkins-docker <span class="token function">cat</span> /var/jenkins_home/secrets/initialAdminPassword
</pre><p>&#xC820;&#xD0A8;&#xC2A4; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xC124;&#xCE58;: <code>Install suggested plugins</code> &#xC120;&#xD0DD;</p>
<p>&#xAD00;&#xB9AC;&#xC790; &#xC0DD;&#xC131;</p>
<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%EC%97%90%EC%9D%B4%EC%A0%84%ED%8A%B8%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EA%B5%AC%EC%84%B1">&#xB3C4;&#xCEE4; &#xC5D0;&#xC774;&#xC804;&#xD2B8;/&#xD074;&#xB77C;&#xC6B0;&#xB4DC; &#xAD6C;&#xC131;</h3>

<p>Cloud Agent &#xAD6C;&#xC131;</p>
<p><code>Jenkins &#xAD00;&#xB9AC;</code> -&gt; <code>&#xB178;&#xB4DC; &#xAD00;&#xB9AC;</code> -&gt; <code>Configure Clouds</code> -&gt; <code>Add a new cloud</code> -&gt; <code>Docker</code></p>
<ul>
<li>Name: <code>docker</code></li>
<li>Docker Cloud details...
<ul>
<li>Docker Host URI: <code>tcp://docker:2376</code></li>
<li>Server credentials
<ul>
<li>Add -&gt; Jenkins
<ul>
<li>Kind: X.509 Client Certificate
<ul>
<li>Client Key
<ul>
<li><code>docker exec jenkins-docker cat /certs/client/key.pem</code> &#xBA85;&#xB839; &#xACB0;&#xACFC; &#xBD99;&#xC5EC;&#xB123;&#xAE30;</li>
</ul>
</li>
<li>Client Cerificate
<ul>
<li><code>docker exec jenkins-docker cat /certs/client/cert.pem</code> &#xBA85;&#xB839; &#xACB0;&#xACFC; &#xBD99;&#xC5EC;&#xB123;&#xAE30;</li>
</ul>
</li>
<li>Server CA Certificate
<ul>
<li><code>docker exec jenkins-docker cat /certs/client/ca.pem</code> &#xBA85;&#xB839; &#xACB0;&#xACFC; &#xBD99;&#xC5EC;&#xB123;&#xAE30;</li>
</ul>
</li>
<li>ID: <code>docker-client-certs</code></li>
<li>Add &#xC120;&#xD0DD;</li>
</ul>
</li>
</ul>
</li>
<li>&#xB4DC;&#xB86D;&#xB2E4;&#xC6B4; &#xBA54;&#xB274;&#xC5D0;&#xC11C; <code>docker-client-certs</code> &#xC120;&#xD0DD;</li>
</ul>
</li>
<li>Test Connection &#xC2E4;&#xD589; &#xBC0F; &#xD655;&#xC778;</li>
<li>Enabled: <code>&#xD65C;&#xC131;</code></li>
</ul>
</li>
<li>Docker Agent templates...
<ul>
<li>Add Docker Template
<ul>
<li>Labels: <code>docker</code></li>
<li>Enabled: <code>&#xD65C;&#xC131;</code></li>
<li>Name: <code>docker-agent</code></li>
<li>Docker Image: <code>jenkins/agent</code></li>
<li>Connect method: <code>Attach Docker container</code> &#xC120;&#xD0DD;</li>
</ul>
</li>
</ul>
</li>
<li>Save &#xC120;&#xD0DD;</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-8-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EC%8B%A4%ED%96%89">&#xC2E4;&#xC2B5; 3-8: &#xD14C;&#xC2A4;&#xD2B8; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xC2E4;&#xD589;</h2>

<p><a href="https://github.com/darinpope/jenkins-example-docker/">https://github.com/darinpope/jenkins-example-docker/</a><br>
<a href="https://github.com/darinpope/jenkins-example-docker/blob/main/Jenkinsfile-1">https://github.com/darinpope/jenkins-example-docker/blob/main/Jenkinsfile-1</a></p>
<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>Enter an item name: <code>docker-test-pipeline</code></li>
<li>Pipeline &#xC120;&#xD0DD; &gt; OK</li>
<li>Pipeline
<ul>
<li>Definition: <code>Pipeline script from SCM</code>
<ul>
<li>SCM: <code>Git</code>
<ul>
<li>Repositories
<ul>
<li>Repository URL: <code>https://github.com/darinpope/jenkins-example-docker.git</code></li>
</ul>
</li>
<li>Branches to build
<ul>
<li>Branch Specifier: <code>*/main</code></li>
</ul>
</li>
</ul>
</li>
<li>Script Path: <code>Jenkinsfile-1</code></li>
</ul>
</li>
<li>&#xC800;&#xC7A5;</li>
</ul>
</li>
<li>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</li>
<li>&#xCF58;&#xC194; &#xCD9C;&#xB825; &#xD655;&#xC778;</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-3-9-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-git-docker-maven-tomcat">&#xC2E4;&#xC2B5; 3-9: &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; + Git + Docker + Maven + Tomcat</h2>

<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%83%9D%EC%84%B1-3">&#xC791;&#xC5C5; &#xC0DD;&#xC131;</h3>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>docker_maven_pipeline</code></li>
<li><code>Pipeline</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>Pipeline
<ul>
<li>Definition: <code>Pipeline script from SCM</code>
<ul>
<li>SCM: <code>Git</code>
<ul>
<li>Repository URL: <code>&lt;YOUR_REPOSITORY&gt;</code></li>
<li>Branch Scpecifier: <code>*/main</code></li>
</ul>
</li>
<li>Script Path: <code>Jenkinsfile-docker</code></li>
</ul>
</li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="jenkinsfile-docker-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1">Jenkinsfile-docker &#xD30C;&#xC77C; &#xC0DD;&#xC131;</h3>

<p>Git &#xC800;&#xC7A5;&#xC18C;&#xC5D0; <code>Jenkinsfile-docker</code> &#xC0DD;&#xC131;</p>
<p><code>Jenkinsfile-docker</code></p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent none

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Checkout&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        git branch<span class="token punctuation">:</span> <span class="token string">&apos;main&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;&lt;URL&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent <span class="token punctuation">{</span>
        docker <span class="token punctuation">{</span> image <span class="token string">&apos;maven:3-openjdk-8&apos;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;mvn clean package -DskipTests=true&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Test&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent <span class="token punctuation">{</span>
        docker <span class="token punctuation">{</span> image <span class="token string">&apos;maven:3-openjdk-8&apos;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;mvn test&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Tag Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Publish Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        <span class="token function">withDockerRegistry</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">&apos;docker-hub-token&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;https://index.docker.io/v1/&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Run Docker Container&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent <span class="token punctuation">{</span>
        docker <span class="token punctuation">{</span> image <span class="token string">&apos;docker:dind&apos;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;docker -H tcp://&lt;DOCKER_HOST_PRIVATE_IP&gt;:2375 container run --detach --name &lt;CONTAINER_NAME&gt; -p 80:8080 &lt;IMAGE&gt;:$BUILD_NUMBER&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1">&#xB3C4;&#xCEE4; &#xD30C;&#xC77C; &#xC791;&#xC131;</h3>

<p><code>Dockerfile</code></p>
<pre data-role="codeBlock" data-info="dockerfile" class="language-dockerfile"><span class="token instruction"><span class="token keyword keyword-FROM">FROM</span> tomcat:9-jre8</span>
<span class="token instruction"><span class="token keyword keyword-COPY">COPY</span> target/hello-world.war /usr/local/tomcat/webapps/</span>
</pre><h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%ED%97%88%EB%B8%8C-%EC%95%A1%EC%84%B8%EC%8A%A4-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1">&#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C; &#xC561;&#xC138;&#xC2A4; &#xD1A0;&#xD070; &#xC0DD;&#xC131;</h3>

<p><a href="https://hub.docker.com">https://hub.docker.com</a> &#xB85C;&#xADF8;&#xC778;</p>
<ul>
<li>&#xC6B0;&#xCE21; &#xC0C1;&#xB2E8; &#xACC4;&#xC815; &#xC120;&#xD0DD;</li>
<li>Account Settings
<ul>
<li>Security
<ul>
<li><code>New Access Token</code>
<ul>
<li>Acess Token Description: <code>for jenkins</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>&#xD1A0;&#xD070; &#xBCF5;&#xC0AC;</li>
</ul>
<h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EC%B6%94%EA%B0%80">&#xC820;&#xD0A8;&#xC2A4; &#xC790;&#xACA9; &#xC99D;&#xBA85; &#xCD94;&#xAC00;</h3>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; Manage Credentials &gt; (global) &gt; Add Credentials</code></p>
<ul>
<li>Kind: <code>Username with password</code>
<ul>
<li>Username: <code>&lt;DOCKER_HUB_USERNAME&gt;</code></li>
<li>Password: <code>&lt;DOCKER_HUB_TOKEN&gt;</code></li>
<li>ID: <code>docker-hub-token</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%EB%8D%B0%EB%AA%AC-%EC%9B%90%EA%B2%A9-%ED%98%B8%EC%8A%A4%ED%8A%B8-%EC%84%A4%EC%A0%95">&#xB3C4;&#xCEE4; &#xB370;&#xBAAC; &#xC6D0;&#xACA9; &#xD638;&#xC2A4;&#xD2B8; &#xC124;&#xC815;</h3>

<p>&#xB3C4;&#xCEE4; &#xC11C;&#xBE44;&#xC2A4; &#xC720;&#xB2DB; &#xD3B8;&#xC9D1;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> systemctl edit docker.service
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 --containerd<span class="token operator">=</span>/run/containerd/containerd.sock
</pre><p>&#xC800;&#xC7A5;: <code>Ctrl-X &gt; Enter</code></p>
<p>&#xB370;&#xBAAC; &#xC815;&#xBCF4; &#xB2E4;&#xC2DC; &#xC77D;&#xAE30;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> systemctl daemon-reload
</pre><p>&#xB3C4;&#xCEE4; &#xC11C;&#xBE44;&#xC2A4; &#xC7AC;&#xC2DC;&#xC791;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> systemctl restart docker.service
</pre><p>&#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> ss -tnlp <span class="token operator">|</span> <span class="token function">grep</span> dockerd
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">LISTEN    <span class="token number">0</span>         <span class="token number">4096</span>                     *:2375                   *:*        users:<span class="token variable"><span class="token punctuation">((</span>&quot;dockerd&quot;<span class="token punctuation">,</span>pid<span class="token operator">=</span><span class="token number">133430</span><span class="token punctuation">,</span>fd<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">))</span></span>
</pre><h3 class="mume-header" id="git-%EC%A0%80%EC%9E%A5%EC%86%8C-%ED%91%B8%EC%8B%9C">Git &#xC800;&#xC7A5;&#xC18C; &#xD478;&#xC2DC;</h3>

<p><code>Dockerfile</code> &#xBC0F; <code>Jenkinsfile-docker</code> &#xD30C;&#xC77C; &#xD478;&#xC2DC;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><h3 class="mume-header" id="%EB%B0%B0%ED%8F%AC-%ED%99%95%EC%9D%B8-2">&#xBC30;&#xD3EC; &#xD655;&#xC778;</h3>

<p>&#xBE4C;&#xB4DC; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;DOCKER_PUBLIC_IP/DNS&gt;/hello-world/
</pre><h3 class="mume-header" id="%EB%8B%A4%EC%8B%9C-%EB%B9%8C%EB%93%9C">&#xB2E4;&#xC2DC; &#xBE4C;&#xB4DC;</h3>

<p><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></p>
<blockquote>
<p>&#xCEE8;&#xD14C;&#xC774;&#xBC84; &#xBC30;&#xD3EC; &#xBC0F; &#xC2E4;&#xD589; &#xC2DC; &#xC624;&#xB958; &#xBC1C;&#xC0DD;<br>
&#xC774;&#xBBF8; &#xCEE8;&#xD14C;&#xC774;&#xB108;&#xAC00; &#xC788;&#xAE30; &#xB54C;&#xBB38;</p>
</blockquote>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-1-%EC%95%A4%EC%84%9C%EB%B8%94-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xC2E4;&#xC2B5; 4-1: &#xC564;&#xC11C;&#xBE14; &#xC124;&#xCE58; &#xBC0F; &#xC6F9;&#xC11C;&#xBC84; &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h2>

<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%95%A4%EC%84%9C%EB%B8%94-%EC%A0%9C%EC%96%B4-%EB%85%B8%EB%93%9C%EC%97%90-%EC%95%A4%EC%84%9C%EB%B8%94-%EC%84%A4%EC%B9%98">&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;(&#xC564;&#xC11C;&#xBE14; &#xC81C;&#xC5B4; &#xB178;&#xB4DC;)&#xC5D0; &#xC564;&#xC11C;&#xBE14; &#xC124;&#xCE58;</h3>

<p>&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xC811;&#xC18D;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common
<span class="token function">sudo</span> add-apt-repository --yes --update ppa:ansible/ansible
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ansible
</pre><h3 class="mume-header" id="%EC%9B%B9%EC%84%9C%EB%B2%84%EC%95%A4%EC%84%9C%EB%B8%94-%EA%B4%80%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xC6F9;&#xC11C;&#xBC84;(&#xC564;&#xC11C;&#xBE14; &#xAD00;&#xB9AC; &#xB178;&#xB4DC;) &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0DD;&#xC131;</h3>

<p><a href="https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#Instances:">https://ap-northeast-2.console.aws.amazon.com/ec2/home?region=ap-northeast-2#Instances:</a></p>
<ul>
<li>&#xC774;&#xB984;: Webserver</li>
<li>AMI &#xC774;&#xBBF8;&#xC9C0;: Ubuntu 20.04</li>
<li>&#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC720;&#xD615;: t3.small</li>
<li>&#xD0A4; &#xD398;&#xC5B4;: sshkey</li>
<li>&#xBC29;&#xD654;&#xBCBD;(&#xBCF4;&#xC548; &#xADF8;&#xB8F9;): allow-ssh-http</li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-2-ad-hoc-%EB%AA%85%EB%A0%B9-ssh">&#xC2E4;&#xC2B5; 4-2: Ad-hoc &#xBA85;&#xB839; - SSH</h2>

<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4%EC%A0%9C%EC%96%B4-%EB%85%B8%EB%93%9C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90-ssh-%ED%82%A4-%EC%8C%8D-%EC%83%9D%EC%84%B1">&#xB3C4;&#xCEE4;(&#xC81C;&#xC5B4; &#xB178;&#xB4DC;) &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xD0A4; &#xC30D; &#xC0DD;&#xC131;</h3>

<p>&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xC811;&#xC18D;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">ssh-keygen -f ~/.ssh/id_rsa -N <span class="token string">&apos;&apos;</span>
</pre><h3 class="mume-header" id="%EC%9B%B9%EC%84%9C%EB%B2%84%EA%B4%80%EB%A6%AC-%EB%85%B8%EB%93%9C%EC%97%90-%EC%82%AC%EC%9A%A9%EC%9E%90-%ED%8C%A8%EC%8A%A4%EC%9B%8C%EB%93%9C-%EC%84%A4%EC%A0%95-%EB%B0%8F-ssh-%ED%8C%A8%EC%8A%A4%EC%9B%8C%EB%93%9C-%EC%9D%B8%EC%A6%9D-%ED%97%88%EC%9A%A9">&#xC6F9;&#xC11C;&#xBC84;(&#xAD00;&#xB9AC; &#xB178;&#xB4DC;)&#xC5D0; &#xC0AC;&#xC6A9;&#xC790; &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xC124;&#xC815; &#xBC0F; SSH &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xC778;&#xC99D; &#xD5C8;&#xC6A9;</h3>

<p>&#xC6DD;&#xC11C;&#xBC84; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xC811;&#xC18D;</p>
<p>ubuntu &#xC0AC;&#xC6A9;&#xC790; &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xAD6C;&#xC131;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">passwd</span> ubuntu
</pre><p>SSH &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xC778;&#xC99D; &#xD5C8;&#xC6A9;:</p>
<p><code>/etc/ssh/sshd_config</code></p>
<pre data-role="codeBlock" data-info="text" class="language-text"> 58 PasswordAuthentication yes
</pre><p>SSH &#xC11C;&#xBE44;&#xC2A4; &#xC7AC;&#xC2DC;&#xC791;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> systemctl restart <span class="token function">ssh</span>
</pre><h3 class="mume-header" id="%EC%9B%B9%EC%84%9C%EB%B2%84-%EA%B4%80%EB%A6%AC-%EB%85%B8%EB%93%9C%EC%97%90-ssh-%EA%B3%B5%EA%B0%9C%ED%82%A4-%EC%84%A4%EC%B9%98">&#xC6F9;&#xC11C;&#xBC84; &#xAD00;&#xB9AC; &#xB178;&#xB4DC;&#xC5D0; SSH &#xACF5;&#xAC1C;&#xD0A4; &#xC124;&#xCE58;</h3>

<p>&#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; SSH &#xC811;&#xC18D;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">ssh-copy-id ubuntu@<span class="token operator">&lt;</span>WEBSERVER_PRIVATE_IP<span class="token operator">&gt;</span>
</pre><h3 class="mume-header" id="%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EB%A5%BC-%EA%B4%80%EB%A6%AC-%EB%85%B8%EB%93%9C%EB%A1%9C-%ED%95%98%EB%8A%94-%EC%9D%B8%EB%B2%A4%ED%86%A0%EB%A6%AC-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1">&#xC6F9;&#xC11C;&#xBC84; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xB97C; &#xAD00;&#xB9AC; &#xB178;&#xB4DC;&#xB85C; &#xD558;&#xB294; &#xC778;&#xBCA4;&#xD1A0;&#xB9AC; &#xD30C;&#xC77C; &#xC791;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/install_webserver <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/install_webserver
</pre><p><code>hosts.ini</code></p>
<pre data-role="codeBlock" data-info="ini" class="language-ini"><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">webservers</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">webserver ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">&lt;WEBSERVER_PRIVATE_IP&gt; ansible_user=ubuntu</span>
</pre><h3 class="mume-header" id="%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90-apache2-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98">&#xC6F9;&#xC11C;&#xBC84; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; Apache2 &#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">ansible webservers -i hosts.ini -m <span class="token function">apt</span> -a <span class="token string">&quot;name=apache2 state=present&quot;</span> -b
</pre><h3 class="mume-header" id="%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%B0%B0%ED%8F%AC-%ED%99%95%EC%9D%B8">&#xC6F9;&#xC11C;&#xBC84; &#xBC30;&#xD3EC; &#xD655;&#xC778;</h3>

<p>&#xBA85;&#xB839;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://<span class="token operator">&lt;</span>WEBSERVER_PUBLIC_IP<span class="token operator">&gt;</span> -I
</pre><p>&#xC6F9; &#xBE0C;&#xB77C;&#xC6B0;&#xC800;:</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;WEBSERVER_PUBLIC_IP&gt;
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-3-ad-hoc-%EB%AA%85%EB%A0%B9-%EB%8F%84%EC%BB%A4">&#xC2E4;&#xC2B5; 4-3: Ad-hoc &#xBA85;&#xB839; - &#xB3C4;&#xCEE4;</h2>

<p>&#xB3C4;&#xCEE4;&#xB294; &#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; &#xC124;&#xCE58;&#xB418;&#xC5B4; &#xC788;&#xC73C;&#xBA70; &#xB3C4;&#xCEE4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xAC00; &#xC81C;&#xC5B4; &#xB178;&#xB4DC;&#xC774;&#xC790; &#xAD00;&#xB9AC; &#xB178;&#xB4DC;</p>
<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%EB%AA%A8%EB%93%88%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%82%AC%EC%A0%84-%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD-%EC%84%A4%EC%B9%98">&#xB3C4;&#xCEE4; &#xBAA8;&#xB4C8;&#xC744; &#xC704;&#xD55C; &#xC0AC;&#xC804; &#xC694;&#xAD6C;&#xC0AC;&#xD56D; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3-docker
</pre><h3 class="mume-header" id="httpd22-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4-%EB%8F%84%EC%BB%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%ED%96%89">httpd:2.2 &#xC774;&#xBBF8;&#xC9C0;&#xB97C; &#xC774;&#xC6A9;&#xD574; &#xB3C4;&#xCEE4; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC2E4;&#xD589;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">ansible localhost -m docker_container -a <span class="token string">&quot;name=myapache image=httpd:2.2 state=started&quot;</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker <span class="token function">ps</span>
</pre><h3 class="mume-header" id="httpd24-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A1%9C-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%9E%AC%EC%83%9D%EC%84%B1">httpd:2.4 &#xC774;&#xBBF8;&#xC9C0;&#xB85C; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC7AC;&#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">ansible localhost -m docker_container -a <span class="token string">&quot;name=myapache image=httpd:2.4 state=started&quot;</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker <span class="token function">ps</span>
</pre><p>&#xD55C;&#xBC88;&#xB354; &#xC2E4;&#xD589;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">ansible localhost -m docker_container -a <span class="token string">&quot;name=myapache image=httpd:2.4 state=started&quot;</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker <span class="token function">ps</span>
</pre><p>&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC0AD;&#xC81C;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">ansible localhost -m docker_container -a <span class="token string">&quot;name=myapache image=httpd:2.4 state=absent&quot;</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker <span class="token function">ps</span>
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-4-%ED%94%8C%EB%A0%88%EC%9D%B4%EB%B6%81-ssh">&#xC2E4;&#xC2B5; 4-4: &#xD50C;&#xB808;&#xC774;&#xBD81; - SSH</h2>

<p>&#xC6F9;&#xC11C;&#xBC84; &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; Apache2 &#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">cd</span> ~/install_webservers
</pre><p><code>install_apache2.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Apache2
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> webservers

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Packages
    <span class="token key atrule">apt</span><span class="token punctuation">:</span> 
      <span class="token key atrule">name</span><span class="token punctuation">:</span> apache2
      <span class="token key atrule">state</span><span class="token punctuation">:</span> present
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Start Services
    <span class="token key atrule">service</span><span class="token punctuation">:</span> 
      <span class="token key atrule">name</span><span class="token punctuation">:</span> apache2
      <span class="token key atrule">state</span><span class="token punctuation">:</span> started
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">ansible-playbook -i hosts.ini install_apache2.yaml -b
</pre><blockquote>
<p>&#xC774;&#xBBF8; &#xC55E;&#xC11C; Ad-hoc &#xBA85;&#xB839;&#xC5D0;&#xC11C; &#xC124;&#xCE58; &#xD588;&#xC74C;</p>
</blockquote>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-5-%ED%94%8C%EB%A0%88%EC%9D%B4%EB%B6%81-docker">&#xC2E4;&#xC2B5; 4-5: &#xD50C;&#xB808;&#xC774;&#xBD81; - Docker</h2>

<p>httpd:2.4 &#xC774;&#xBBF8;&#xC9C0;&#xB85C; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/deploy_httpd_container <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/deploy_httpd_container
</pre><p><code>deploy_httpd_container.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy Httpd Container
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> localhost
  <span class="token key atrule">connection</span><span class="token punctuation">:</span> local

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create &amp; Start Container
    <span class="token key atrule">docker_container</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> myapache
      <span class="token key atrule">image</span><span class="token punctuation">:</span> httpd<span class="token punctuation">:</span><span class="token number">2.4</span>
      <span class="token key atrule">state</span><span class="token punctuation">:</span> started
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">ansible-playbook deploy_httpd_container.yaml
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">docker container stop myapache
docker container <span class="token function">rm</span> myapache
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-6-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-git-docker-maven-tomcat-ansible">&#xC2E4;&#xC2B5; 4-6: &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; + Git + Docker + Maven + Tomcat + Ansible</h2>

<p><code>&#xC2E4;&#xC2B5; 3-9</code> &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xAC1C;&#xC120;:</p>
<ul>
<li>&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xBC30;&#xD3EC;&#xB97C; &#xC704;&#xD55C; &#xD50C;&#xB808;&#xC774;&#xBD81; &#xC791;&#xC131;</li>
<li>&#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778;&#xC5D0; &#xC564;&#xC11C;&#xBE14; &#xC801;&#xC6A9;</li>
</ul>
<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%88%98%EC%A0%95-1">&#xC791;&#xC5C5; &#xC218;&#xC815;</h3>

<p><code>Dashboard &gt; docker_maven_pipeline</code></p>
<ul>
<li><code>&#xAD6C;&#xC131;</code> &#xC120;&#xD0DD;
<ul>
<li>Script Path: <code>Jenkinsfile-docker-ansible</code></li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="jenkinsfile-docker-ansible-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1">Jenkinsfile-docker-ansible &#xD30C;&#xC77C; &#xC0DD;&#xC131;</h3>

<p>Git &#xC800;&#xC7A5;&#xC18C;&#xC5D0; <code>Jenkinsfile-docker-ansible</code> &#xC0DD;&#xC131;</p>
<p><code>Jenkinsfile-docker-ansible</code></p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent none

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Checkout&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        git branch<span class="token punctuation">:</span> <span class="token string">&apos;main&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;&lt;URL&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent <span class="token punctuation">{</span>
        docker <span class="token punctuation">{</span> image <span class="token string">&apos;maven:3-openjdk-8&apos;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;mvn clean package -DskipTests=true&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Test&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent <span class="token punctuation">{</span>
        docker <span class="token punctuation">{</span> image <span class="token string">&apos;maven:3-openjdk-8&apos;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;mvn test&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Tag Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Publish Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent any
      steps <span class="token punctuation">{</span>
        <span class="token function">withDockerRegistry</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">&apos;docker-hub-token&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;https://index.docker.io/v1/&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;&lt;COMMAND&gt;&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Run Docker Container&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      agent <span class="token punctuation">{</span>
        docker <span class="token punctuation">{</span> 
          image <span class="token string">&apos;&lt;DOCKER_HUB_USERNAME&gt;/jenkins-ansible&apos;</span>
          args <span class="token string">&apos;-u 0:0 -e DOCKER_HOST=tcp://&lt;DOCKER_PRIVATE_IP&gt;:2375&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">ansiblePlaybook</span><span class="token punctuation">(</span>playbook<span class="token punctuation">:</span> <span class="token string">&apos;docker-container-deploy.yaml&apos;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#xCEE8;&#xD14C;&#xC774;&#xB108;&#xB97C; &#xC2E4;&#xD589;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xC820;&#xD0A8;&#xC2A4; &#xB3C4;&#xCEE4; &#xC5D0;&#xC774;&#xC804;&#xD2B8;&#xAC00; &#xD544;&#xC694;!</p>
</blockquote>
<hr>
<h2 class="mume-header" id="%EC%98%B5%EC%85%98-%EC%8B%A4%EC%8A%B5-4-7-%EC%95%A4%EC%84%9C%EB%B8%94-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EB%8F%84%EC%BB%A4-%EC%97%90%EC%9D%B4%EC%A0%84%ED%8A%B8-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%83%9D%EC%84%B1">(&#xC635;&#xC158;) &#xC2E4;&#xC2B5; 4-7: &#xC564;&#xC11C;&#xBE14; &#xC820;&#xD0A8;&#xC2A4; &#xB3C4;&#xCEE4; &#xC5D0;&#xC774;&#xC804;&#xD2B8; &#xC774;&#xBBF8;&#xC9C0; &#xC0DD;&#xC131;</h2>

<h3 class="mume-header" id="%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8%EC%97%90%EC%84%9C-%EC%95%A4%EC%84%9C%EB%B8%94%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EB%8F%84%EC%BB%A4-%EC%97%90%EC%9D%B4%EC%A0%84%ED%8A%B8-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%83%9D%EC%84%B1">&#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778;&#xC5D0;&#xC11C; &#xC564;&#xC11C;&#xBE14;&#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xC820;&#xD0A8;&#xC2A4; &#xB3C4;&#xCEE4; &#xC5D0;&#xC774;&#xC804;&#xD2B8; &#xC774;&#xBBF8;&#xC9C0; &#xC0DD;&#xC131;</h3>

<ul>
<li>docker:dind &#xC774;&#xBBF8;&#xC9C0; &#xC0AC;&#xC6A9;</li>
<li>Alpine &#xB9AC;&#xB205;&#xC2A4;&#xB294; &#xD328;&#xD0A4;&#xC9C0; &#xC124;&#xCE58;&#xC2DC; <code>apk</code> &#xBA85;&#xB839; &#xC0AC;&#xC6A9;</li>
</ul>
<blockquote>
<p><code>c1t1d0s7/jenkins-ansible</code> &#xC774;&#xBBF8;&#xC9C0;&#xB97C; &#xC0AC;&#xC6A9;&#xD574;&#xB3C4; &#xB428;</p>
</blockquote>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/jenkins-ansible-agent <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/jenkins-ansible-agent
</pre><p><code>Dockerfile</code></p>
<pre data-role="codeBlock" data-info="dockerfile" class="language-dockerfile"><span class="token instruction"><span class="token keyword keyword-FROM">FROM</span> docker:dind</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> apk add py3-pip &amp;&amp; pip3 install docker &amp;&amp; apk add ansible</span>
<span class="token instruction"><span class="token keyword keyword-RUN">RUN</span> adduser -u 1000 jenkins jenkins -D</span>
<span class="token instruction"><span class="token keyword keyword-USER">USER</span> jenkins</span>
<span class="token instruction"><span class="token keyword keyword-ENTRYPOINT">ENTRYPOINT</span> []</span>
<span class="token instruction"><span class="token keyword keyword-CMD">CMD</span> [<span class="token string">&quot;sh&quot;</span>]</span>
</pre><h3 class="mume-header" id="%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B9%8C%EB%93%9C">&#xC774;&#xBBF8;&#xC9C0; &#xBE4C;&#xB4DC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">docker image build -t <span class="token operator">&lt;</span>DOCKER_HUB_USERNAME<span class="token operator">&gt;</span>/jenkins-ansible <span class="token builtin class-name">.</span>
</pre><h3 class="mume-header" id="%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%91%B8%EC%8B%9C">&#xC774;&#xBBF8;&#xC9C0; &#xD478;&#xC2DC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">docker image push <span class="token operator">&lt;</span>DOCKER_HUB_USERNAME<span class="token operator">&gt;</span>/jenkins-ansible
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-8-%EC%95%A4%EC%84%9C%EB%B8%94-%EB%8F%84%EC%BB%A4%EA%B0%80-%EC%A0%81%EC%9A%A9%EB%90%9C-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EB%A7%88%EB%AC%B4%EB%A6%AC">&#xC2E4;&#xC2B5; 4-8: &#xC564;&#xC11C;&#xBE14;, &#xB3C4;&#xCEE4;&#xAC00; &#xC801;&#xC6A9;&#xB41C; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xB9C8;&#xBB34;&#xB9AC;</h2>

<h3 class="mume-header" id="%EC%95%A4%EC%84%9C%EB%B8%94-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98">&#xC564;&#xC11C;&#xBE14; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xC124;&#xCE58;</h3>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; &#xD50C;&#xB7EC;&#xADF8;&#xC778; &#xAD00;&#xB9AC; &gt; &#xC124;&#xCE58; &#xAC00;&#xB2A5;</code>: <code>Ansible</code> &#xC124;&#xCE58;</p>
<h3 class="mume-header" id="%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%B0%B0%ED%8F%AC-%ED%94%8C%EB%A0%88%EC%9D%B4%EB%B6%81-%EC%9E%91%EC%84%B1">&#xCEE8;&#xD14C;&#xC774;&#xB108; &#xBC30;&#xD3EC; &#xD50C;&#xB808;&#xC774;&#xBD81; &#xC791;&#xC131;</h3>

<p><code>docker-container-deploy.yaml</code></p>
<pre data-role="codeBlock" data-info="dockerfile" class="language-dockerfile">- hosts: localhost
  connection: local
  
  tasks:
  - name: Create &amp; Start Container
    docker_container:
      name: myweb
      image: &quot;&lt;IMAGE&gt;:{{ lookup(&apos;env&apos;,&apos;BUILD_NUMBER&apos;) }}&quot;
      state: started
      ports:
      - &quot;80:8080&quot;
</pre><h3 class="mume-header" id="git-%EC%A0%80%EC%9E%A5%EC%86%8C-%ED%91%B8%EC%8B%9C-1">Git &#xC800;&#xC7A5;&#xC18C; &#xD478;&#xC2DC;</h3>

<p><code>docker-container-deploy.yaml</code> &#xBC0F; <code>Jenkinsfile-docker-ansible</code> &#xD478;&#xC2DC;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><h3 class="mume-header" id="%EC%9E%91%EC%97%85-%ED%99%95%EC%9D%B8-3">&#xC791;&#xC5C5; &#xD655;&#xC778;</h3>

<p>&#xBE4C;&#xB4DC; &#xD788;&#xC2A4;&#xD1A0;&#xB9AC; &#xD655;&#xC778;</p>
<p>&#xC6F9; &#xBE0C;&#xB77C;&#xC6B0;&#xC800;:</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://&lt;DOCKER_PUBLIC_IP/DNS&gt;/hello-world/
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-4-9-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%A0%95%EB%A6%AC">&#xC2E4;&#xC2B5; 4-9: &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC815;&#xB9AC;</h2>

<p>Docker, Webserver &#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC0AD;&#xC81C;</p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-1-eks-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%B0%B0%ED%8F%AC-%EA%B4%80%EB%A0%A8-%EB%8F%84%EA%B5%AC-%EC%84%A4%EC%B9%98">&#xC2E4;&#xC2B5; 5-1: EKS &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xBC30;&#xD3EC; &#xAD00;&#xB828; &#xB3C4;&#xAD6C; &#xC124;&#xCE58;</h2>

<h3 class="mume-header" id="aws-iam-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%83%9D%EC%84%B1">AWS IAM &#xC0AC;&#xC6A9;&#xC790; &#xC0DD;&#xC131;</h3>

<p><code>https://us-east-1.console.aws.amazon.com/iamv2/home?region=ap-northeast-2#/users</code></p>
<ul>
<li><code>&#xC0AC;&#xC6A9;&#xC790; &#xCD94;&#xAC00;</code>
<ul>
<li>&#xC0AC;&#xC6A9;&#xC790; &#xC138;&#xBD80; &#xC815;&#xBCF4; &#xC124;&#xC815;
<ul>
<li>&#xC0AC;&#xC6A9;&#xC790; &#xC774;&#xB984;: <code>eksadmin</code></li>
</ul>
</li>
<li>AWS &#xC561;&#xC138;&#xC2A4; &#xC720;&#xD615; &#xC120;&#xD0DD;
<ul>
<li>AWS &#xC790;&#xACA9; &#xC99D;&#xBA85; &#xC720;&#xD615; &#xC120;&#xD0DD;
<ul>
<li><code>&#xC561;&#xC138;&#xC2A4; &#xD0A4; - &#xD504;&#xB85C;&#xADF8;&#xB798;&#xBC0D; &#xBC29;&#xC2DD; &#xC561;&#xC138;&#xC2A4;</code> &#xC120;&#xD0DD;</li>
<li><code>&#xC554;&#xD638; - AWS &#xAD00;&#xB9AC; &#xCF58;&#xC194; &#xC561;&#xC138;&#xC2A4;</code> &#xC120;&#xD0DD;</li>
</ul>
</li>
<li>&#xCF58;&#xC194; &#xBE44;&#xBC00;&#xBC88;&#xD638;: <code>&#xC0AC;&#xC6A9;&#xC790; &#xC9C0;&#xC815; &#xBE44;&#xBC00; &#xBC88;&#xD638;</code> &#xC120;&#xD0DD;
<ul>
<li><code>&lt;YOUR-PASSWORD&gt;</code></li>
</ul>
</li>
<li>&#xBE44;&#xBC00;&#xBC88;&#xD638; &#xC7AC;&#xC124;&#xC815; &#xD544;&#xC694;: &#xCCB4;&#xD06C; &#xD574;&#xC81C;</li>
</ul>
</li>
<li>&#xAD8C;&#xD55C; &#xC124;&#xC815;: <code>&#xAE30;&#xC874; &#xC815;&#xCC45; &#xC9C1;&#xC811; &#xC5F0;&#xACB0;</code> &#xC120;&#xD0DD;
<ul>
<li><code>AdministratorAccess</code> &#xC120;&#xD0DD;</li>
</ul>
</li>
<li>&#xD0DC;&#xADF8; &#xCD94;&#xAC00;: <code>&#xC5C6;&#xC74C;</code></li>
<li><code>.csv &#xB2E4;&#xC6B4;&#xB85C;&#xB4DC;</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="aws-cli-%EB%8F%84%EA%B5%AC-%EC%84%A4%EC%B9%98">AWS CLI &#xB3C4;&#xAD6C; &#xC124;&#xCE58;</h3>

<p><a href="https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html">https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html</a></p>
<h4 class="mume-header" id="macos-homebrew">macOS - Homebrew</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">brew <span class="token function">install</span> awscli
</pre><h4 class="mume-header" id="windows-chocolatey">Windows - Chocolatey</h4>

<pre data-role="codeBlock" data-info="powershell" class="language-powershell">choco install awscli
</pre><h3 class="mume-header" id="aws-iam-authenticator-%EB%8F%84%EA%B5%AC-%EC%84%A4%EC%B9%98">aws-iam-authenticator &#xB3C4;&#xAD6C; &#xC124;&#xCE58;</h3>

<p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-aws-iam-authenticator.html">https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-aws-iam-authenticator.html</a></p>
<h4 class="mume-header" id="macos-homebrew-1">macOS - Homebrew</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">brew <span class="token function">install</span> aws-iam-authenticator
</pre><h4 class="mume-header" id="windows-chocolatey-1">Windows - Chocolatey</h4>

<pre data-role="codeBlock" data-info="powershell" class="language-powershell">choco install aws<span class="token operator">-</span>iam<span class="token operator">-</span>authenticator
</pre><h3 class="mume-header" id="aws-%EC%9E%90%EA%B2%A9%EC%A6%9D%EB%AA%85-%EA%B5%AC%EC%84%B1">AWS &#xC790;&#xACA9;&#xC99D;&#xBA85; &#xAD6C;&#xC131;</h3>

<p>&#xC790;&#xACA9;&#xC99D;&#xBA85; &#xAD6C;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">aws configure
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">AWS Access Key ID <span class="token punctuation">[</span>None<span class="token punctuation">]</span>: AKIAIOSFODNN7EXAMPLE
AWS Secret Access Key <span class="token punctuation">[</span>None<span class="token punctuation">]</span>: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
Default region name <span class="token punctuation">[</span>None<span class="token punctuation">]</span>: ap-northeast-2
Default output <span class="token function">format</span> <span class="token punctuation">[</span>None<span class="token punctuation">]</span>: json
</pre><p>&#xC790;&#xACA9;&#xC99D;&#xBA85; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">aws sts get-caller-identity
</pre><h3 class="mume-header" id="eksctl-%EB%8F%84%EA%B5%AC-%EC%84%A4%EC%B9%98">eksctl &#xB3C4;&#xAD6C; &#xC124;&#xCE58;</h3>

<p><a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/eksctl.html">https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/eksctl.html</a></p>
<h4 class="mume-header" id="macos-homebrew-2">macOS - Homebrew</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">brew <span class="token function">install</span> eksctl
</pre><h4 class="mume-header" id="windows-chocolatey-2">Windows - Chocolatey</h4>

<pre data-role="codeBlock" data-info="powershell" class="language-powershell">choco install eksctl
</pre><h3 class="mume-header" id="kubectl-%EB%8F%84%EA%B5%AC-%EC%84%A4%EC%B9%98">kubectl &#xB3C4;&#xAD6C; &#xC124;&#xCE58;</h3>

<blockquote>
<p>1.23.13 &#xBC84;&#xC804;&#xC73C;&#xB85C; &#xC124;&#xCE58;</p>
</blockquote>
<h4 class="mume-header" id="macos">macOS</h4>

<p><a href="https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-macos/">https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-macos/</a></p>
<h4 class="mume-header" id="windows">Windows</h4>

<p><a href="https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-windows/">https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-windows/</a></p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-2-eks-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%B0%B0%ED%8F%AC">&#xC2E4;&#xC2B5; 5-2: EKS &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xBC30;&#xD3EC;</h2>

<h3 class="mume-header" id="eksctl%EB%A1%9C-eks-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%B0%B0%ED%8F%AC">eksctl&#xB85C; EKS &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xBC30;&#xD3EC;</h3>

<p>&#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xBC30;&#xD3EC;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">eksctl create cluster --name myeks --region ap-northeast-2 --version <span class="token number">1.23</span> --instance-types t3.medium
</pre><blockquote>
<p>&#xC57D; 15&#xBD84; &#xC18C;&#xC694;</p>
</blockquote>
<h3 class="mume-header" id="aws-ebs-csi-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EC%95%A0%EB%93%9C%EC%98%A8-%EC%84%A4%EC%B9%98">AWS EBS CSI &#xB4DC;&#xB77C;&#xC774;&#xBC84; &#xC560;&#xB4DC;&#xC628; &#xC124;&#xCE58;</h3>

<blockquote>
<p>EKS 1.23 &#xBD80;&#xD130; EBS CSI &#xB4DC;&#xB77C;&#xC774;&#xBC84;&#xB97C; &#xAE30;&#xBCF8; &#xC0AC;&#xC6A9;</p>
</blockquote>
<p>OIDC &#xC5F0;&#xACB0;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">eksctl utils associate-iam-oidc-provider --cluster myeks --approve
</pre><p>EBS CSI &#xB4DC;&#xB77C;&#xC774;&#xBC84;&#xB97C; &#xC704;&#xD55C; &#xC11C;&#xBE44;&#xC2A4; &#xACC4;&#xC815; &#xC0DD;&#xC131;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">eksctl create iamserviceaccount <span class="token punctuation">\</span>
  --name ebs-csi-controller-sa <span class="token punctuation">\</span>
  --namespace kube-system <span class="token punctuation">\</span>
  --cluster myeks <span class="token punctuation">\</span>
  --attach-policy-arn arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy <span class="token punctuation">\</span>
  --approve <span class="token punctuation">\</span>
  --role-only <span class="token punctuation">\</span>
  --role-name AmazonEKS_EBS_CSI_DriverRole
</pre><p>&#xACC4;&#xC815; ID &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">aws sts get-caller-identity --output text
</pre><p>EBS CSI &#xC560;&#xB4DC;&#xC628; &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">eksctl create addon --name aws-ebs-csi-driver --cluster myeks --service-account-role-arn arn:aws:iam::<span class="token operator">&lt;</span>ACCOUNT_ID<span class="token operator">&gt;</span>:role/AmazonEKS_EBS_CSI_DriverRole --force
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-3-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%ED%99%95%EC%9D%B8">&#xC2E4;&#xC2B5; 5-3: &#xCFE0;&#xBC84;&#xB124;&#xD2F0;&#xC2A4; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xD655;&#xC778;</h2>

<p>&#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xB9AC;&#xC18C;&#xC2A4; &#xC885;&#xB958; &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl api-resources
</pre><p>&#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xBC84;&#xC804; &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl api-versions
</pre><p>&#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC815;&#xC758; &#xD544;&#xB4DC; &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl explain pod  
kubectl explain pod.spec  
kubectl explain pod.spec.containers  
kubectl explain pod.spec.containers.name  
kubectl explain pod.spec.containers.image  
kubectl exaplin pod.spec --recursive
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-4-%EB%AA%85%EB%A0%B9%ED%98%95-%EC%BB%A4%EB%A9%98%EB%93%9C%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9B%B9-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B5%AC%EC%B6%95">&#xC2E4;&#xC2B5; 5-4: &#xBA85;&#xB839;&#xD615; &#xCEE4;&#xBA58;&#xB4DC;&#xB97C; &#xC774;&#xC6A9;&#xD55C; &#xC6F9; &#xC11C;&#xBE44;&#xC2A4; &#xAD6C;&#xCD95;</h2>

<blockquote>
<p>&#xBA85;&#xB839;&#xD615; &#xCEE4;&#xBA58;&#xB4DC;&#xB97C; &#xC774;&#xC6A9;&#xD55C; &#xC6F9; &#xC11C;&#xBE44;&#xC2A4; &#xAD6C;&#xCD95; (1)~(9) &#xC7A5;&#xD45C; &#xC2E4;&#xC2B5;</p>
</blockquote>
<h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xB9AC;&#xC18C;&#xC2A4; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create deployment myapp --image<span class="token operator">=</span>ghcr.io/c1t1d0s7/go-myweb:alpine
</pre><h3 class="mume-header" id="%EC%83%9D%EC%84%B1%EB%90%9C-%EB%A6%AC%EC%86%8C%EC%8A%A4-%ED%99%95%EC%9D%B8">&#xC0DD;&#xC131;&#xB41C; &#xB9AC;&#xC18C;&#xC2A4; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get deploy,rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/myapp   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           2m1s

NAME                               DESIRED   CURRENT   READY   AGE
replicaset.apps/myapp-79877ddf67   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">1</span>       2m1s

NAME                         READY   STATUS    RESTARTS   AGE
pod/myapp-79877ddf67-zmjb4   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          2m1s
</pre><h3 class="mume-header" id="%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%99%B8%EB%B6%80%EC%97%90-%EB%85%B8%EC%B6%9C%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xC678;&#xBD80;&#xC5D0; &#xB178;&#xCD9C;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xC11C;&#xBE44;&#xC2A4; &#xB9AC;&#xC18C;&#xC2A4; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl expose deployment myapp --name myapp-svc --port <span class="token number">80</span> --protocol TCP --target-port <span class="token number">8080</span> --type LoadBalancer
</pre><h3 class="mume-header" id="%EC%83%9D%EC%84%B1%EB%90%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4-%ED%99%95%EC%9D%B8">&#xC0DD;&#xC131;&#xB41C; &#xC11C;&#xBE44;&#xC2A4; &#xB9AC;&#xC18C;&#xC2A4; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get services myapp-svc
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">NAME        TYPE           CLUSTER-IP      EXTERNAL-IP      PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>        AGE
myapp-svc   LoadBalancer   <span class="token number">10.233</span>.19.224   XXXXXXX          <span class="token number">80</span>:31266/TCP   32s
</pre><h3 class="mume-header" id="%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4%EC%9D%98-external-ip%EB%A1%9C-%EC%A0%91%EC%86%8D">&#xC11C;&#xBE44;&#xC2A4; &#xB9AC;&#xC18C;&#xC2A4;&#xC758; EXTERNAL-IP&#xB85C; &#xC811;&#xC18D;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://XXXXXXX

Hello World<span class="token operator">!</span>
myapp-79877ddf67-zmjb4
</pre><h3 class="mume-header" id="%ED%8C%8C%EB%93%9C-%EC%88%98%EB%8F%99-%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81">&#xD30C;&#xB4DC; &#xC218;&#xB3D9; &#xC2A4;&#xCF00;&#xC77C;&#xB9C1;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl scale deploy myapp --replicas <span class="token number">3</span>
</pre><h3 class="mume-header" id="%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81-%EA%B2%B0%EA%B3%BC-%ED%99%95%EC%9D%B8">&#xC2A4;&#xCF00;&#xC77C;&#xB9C1; &#xACB0;&#xACFC; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get deployments,replicasets,pods
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/myapp   <span class="token number">3</span>/3     <span class="token number">3</span>            <span class="token number">3</span>           12m

NAME                               DESIRED   CURRENT   READY   AGE
replicaset.apps/myapp-79877ddf67   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>       12m

NAME                         READY   STATUS    RESTARTS   AGE
pod/myapp-79877ddf67-br8t2   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          34s
pod/myapp-79877ddf67-mdh4v   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          34s
pod/myapp-79877ddf67-zmjb4   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          12m
</pre><h3 class="mume-header" id="%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4%EC%9D%98-external-ip%EB%A1%9C-%EC%97%AC%EB%9F%AC%EB%B2%88-%EC%A0%91%EC%86%8D-%EC%8B%9C%EB%8F%84">&#xC11C;&#xBE44;&#xC2A4; &#xB9AC;&#xC18C;&#xC2A4;&#xC758; EXTERNAL-IP&#xB85C; &#xC5EC;&#xB7EC;&#xBC88; &#xC811;&#xC18D; &#xC2DC;&#xB3C4;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://XXXXXXX
</pre><pre data-role="codeBlock" data-info="text" class="language-text">Hello World!
myapp-79877ddf67-zmjb4
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://XXXXXXX
</pre><pre data-role="codeBlock" data-info="text" class="language-text">Hello World!
myapp-79877ddf67-br8t2
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://XXXXXXX
</pre><pre data-role="codeBlock" data-info="text" class="language-text">Hello World!
myapp-79877ddf67-zmjb4
</pre><h3 class="mume-header" id="%ED%8A%B9%EC%A0%95myapp-79877ddf67-zmjb4-%ED%8C%8C%EB%93%9C-%EC%82%AD%EC%A0%9C">&#xD2B9;&#xC815;(myapp-79877ddf67-zmjb4) &#xD30C;&#xB4DC; &#xC0AD;&#xC81C;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl delete pod myapp-79877ddf67-zmjb4
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">NAME                     READY   STATUS    RESTARTS   AGE
myapp-79877ddf67-br8t2   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m19s
myapp-79877ddf67-mdh4v   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3m19s
myapp-79877ddf67-xtpf7   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          12s
</pre><p><code>xtpf7</code> &#xD30C;&#xB4DC;&#xAC00; &#xC0C8;&#xB86D;&#xAC8C; &#xC0DD;&#xC131;&#xB428;</p>
<h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%EB%B0%8F-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%82%AD%EC%A0%9C">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xBC0F; &#xC11C;&#xBE44;&#xC2A4; &#xB9AC;&#xC18C;&#xC2A4; &#xC0AD;&#xC81C;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl delete deployments myapp
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl delete svc myapp-svc
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-5-%ED%8C%8C%EB%93%9C-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%A3%BC%EC%9A%94-%EB%AA%85%EB%A0%B9-%ED%99%95%EC%9D%B8">&#xC2E4;&#xC2B5; 5-5: &#xD30C;&#xB4DC; &#xB9AC;&#xC18C;&#xC2A4; &#xC0DD;&#xC131; &#xBC0F; &#xC8FC;&#xC694; &#xBA85;&#xB839; &#xD655;&#xC778;</h2>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/kube-object <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/kube-object
</pre><h3 class="mume-header" id="%ED%8C%8C%EB%93%9C-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%9E%91%EC%84%B1">&#xD30C;&#xB4DC; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC791;&#xC131;</h3>

<p><code>pod.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/c1t1d0s7/go<span class="token punctuation">-</span>myweb<span class="token punctuation">:</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
</pre><h3 class="mume-header" id="%ED%8C%8C%EB%93%9C-%EC%83%9D%EC%84%B1">&#xD30C;&#xB4DC; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f pod.yaml
</pre><h3 class="mume-header" id="%ED%8C%8C%EB%93%9C-%ED%99%95%EC%9D%B8-%EC%83%81%EC%84%B8-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8-%EB%A1%9C%EA%B7%B8-%ED%99%95%EC%9D%B8">&#xD30C;&#xB4DC; &#xD655;&#xC778;, &#xC0C1;&#xC138; &#xC815;&#xBCF4; &#xD655;&#xC778;, &#xB85C;&#xADF8; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl describe po myapp-pod
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl logs myapp-pod
</pre><h3 class="mume-header" id="%ED%8C%8C%EB%93%9C-%ED%8F%AC%ED%8A%B8-%ED%8F%AC%EC%9B%8C%EB%93%9C-%EB%B0%8F-%EC%9B%B9-%EC%A0%91%EC%86%8D-%ED%99%95%EC%9D%B8">&#xD30C;&#xB4DC; &#xD3EC;&#xD2B8; &#xD3EC;&#xC6CC;&#xB4DC; &#xBC0F; &#xC6F9; &#xC811;&#xC18D; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl port-forward myapp-pod <span class="token number">8080</span>:8080
</pre><p>&#xB2E4;&#xB978; &#xD130;&#xBBF8;&#xB110;/&#xD30C;&#xC6CC;&#xC258; &#xC2E4;&#xD589;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://localhost:8080
</pre><h3 class="mume-header" id="%ED%8C%8C%EB%93%9C-%EC%82%AD%EC%A0%9C">&#xD30C;&#xB4DC; &#xC0AD;&#xC81C;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl delete -f pod.yaml
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-6-%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81">&#xC2E4;&#xC2B5; 5-6: &#xB808;&#xD50C;&#xB9AC;&#xCE74;&#xC14B; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xB9AC;&#xC18C;&#xC2A4; &#xC0DD;&#xC131; &#xBC0F; &#xC2A4;&#xCF00;&#xC77C;&#xB9C1;</h2>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">cd</span> ~/kube-object
</pre><h3 class="mume-header" id="%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%9E%91%EC%84%B1">&#xB808;&#xD50C;&#xB9AC;&#xCE74;&#xC14B; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC791;&#xC131;</h3>

<p><code>rs.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicaSets
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>rs
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>rs
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>rs
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/c1t1d0s7/go<span class="token punctuation">-</span>myweb<span class="token punctuation">:</span>alpine
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</pre><h3 class="mume-header" id="%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B-%EC%83%9D%EC%84%B1">&#xB808;&#xD50C;&#xB9AC;&#xCE74;&#xC14B; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f rs.yaml
</pre><h3 class="mume-header" id="%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B-%ED%99%95%EC%9D%B8-%EC%83%81%EC%84%B8-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8">&#xB808;&#xD50C;&#xB9AC;&#xCE74;&#xC14B; &#xD655;&#xC778;, &#xC0C1;&#xC138; &#xC815;&#xBCF4; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl describe rs myapp-rs
</pre><h3 class="mume-header" id="%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B-%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81">&#xB808;&#xD50C;&#xB9AC;&#xCE74;&#xC14B; &#xC2A4;&#xCF00;&#xC77C;&#xB9C1;</h3>

<p><code>rs.yaml</code> &#xD30C;&#xC77C; &#xC218;&#xC815;</p>
<pre data-role="codeBlock" data-info="yaml" class="language-yaml"><span class="token punctuation">...</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token punctuation">...</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl apply -f rs.yaml
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl edit rs myapp-rs
</pre><p>3 &gt; 2 &#xAC1C;&#xB85C; &#xBCC0;&#xACBD;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get rs,po
</pre><h3 class="mume-header" id="%EB%A0%88%ED%94%8C%EB%A6%AC%EC%B9%B4%EC%85%8B-%EC%82%AD%EC%A0%9C">&#xB808;&#xD50C;&#xB9AC;&#xCE74;&#xC14B; &#xC0AD;&#xC81C;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl delete -f rs.yaml
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-7-%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8">&#xC2E4;&#xC2B5; 5-7: &#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC0DD;&#xC131; &#xBC0F; &#xC5C5;&#xB370;&#xC774;&#xD2B8;</h2>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">cd</span> ~/kube-object
</pre><h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%9E%91%EC%84%B1">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC791;&#xC131;</h3>

<p><code>deploy.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>deploy
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>deploy
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>deploy
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/c1t1d0s7/go<span class="token punctuation">-</span>myweb<span class="token punctuation">:</span>v1.0
        <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</pre><h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%EC%83%9D%EC%84%B1">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f deploy.yaml
</pre><h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%ED%99%95%EC%9D%B8-%EC%83%81%EC%84%B8-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xD655;&#xC778;, &#xC0C1;&#xC138; &#xC815;&#xBCF4; &#xD655;&#xC778;, &#xC5C5;&#xB370;&#xC774;&#xD2B8; &#xD788;&#xC2A4;&#xD1A0;&#xB9AC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get deploy,rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl describe deploy myapp-deploy
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl rollout <span class="token function">history</span> deploy myapp-deploy
</pre><h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EB%B0%8F-%EB%A1%A4%EB%B0%B1%ED%83%9C%EA%B7%B8-v10-v20-v30-v40">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8; &#xC5C5;&#xB370;&#xC774;&#xD2B8; &#xBC0F; &#xB864;&#xBC31;(&#xD0DC;&#xADF8;: <code>v1.0</code>, <code>v2.0</code>, <code>v3.0</code>, <code>v4.0</code>)</h3>

<h4 class="mume-header" id="v10-v20">v1.0 -&gt; v2.0</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl <span class="token builtin class-name">set</span> image deploy myapp-deploy <span class="token assign-left variable">myapp</span><span class="token operator">=</span>ghcr.io/c1t1d0s7/go-myweb:v2.0
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get deploy,rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl rollout <span class="token function">history</span> deploy myapp-deploy
</pre><h4 class="mume-header" id="v20-v30">v2.0 -&gt; v3.0</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl edit deploy myapp-deploy
</pre><pre data-role="codeBlock" data-info="yaml" class="language-yaml"><span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/c1t1d0s7/go<span class="token punctuation">-</span>myweb<span class="token punctuation">:</span>v3.0
    <span class="token punctuation">...</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get deploy,rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl rollout <span class="token function">history</span> deploy myapp-deploy
</pre><h4 class="mume-header" id="v30-v40">v3.0 -&gt; v4.0</h4>

<p><code>deploy.yaml</code> &#xD30C;&#xC77C; &#xC218;&#xC815;</p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token punctuation">...</span>
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">kubernetes.io/change-cause</span><span class="token punctuation">:</span> from v3.0 to v4.0
  <span class="token punctuation">...</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/c1t1d0s7/go<span class="token punctuation">-</span>myweb<span class="token punctuation">:</span>v4.0
    <span class="token punctuation">...</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl apply -f deploy.yaml
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get deploy,rs,po
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl rollout <span class="token function">history</span> deploy myapp-deploy
</pre><h4 class="mume-header" id="v40-v30-%EB%A1%A4%EB%B0%B1">v4.0 -&gt; v3.0 &#xB864;&#xBC31;</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl rollout undo deploy myapp-deploy --to-revision<span class="token operator">=</span>X
</pre><blockquote>
<p>&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8;&#xB294; &#xC0AD;&#xC81C;&#xD558;&#xC9C0; &#xC54A;&#xACE0; &#xB2E4;&#xC74C; <code>&#xC2E4;&#xC2B5; 5-8</code>&#xC5D0;&#xC11C; &#xACC4;&#xC18D; &#xC0AC;&#xC6A9;, &#xD0DC;&#xADF8;&#xB294; &#xC0C1;&#xAD00; &#xC5C6;&#xC74C;</p>
</blockquote>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1-%ED%99%95%EC%9D%B8">&#xC2E4;&#xC2B5; 5-8: &#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131;, &#xD655;&#xC778;</h2>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">cd</span> ~/kube-object
</pre><h3 class="mume-header" id="%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8%EA%B0%80-%EC%97%86%EB%8B%A4%EB%A9%B4-%EC%83%9D%EC%84%B1">&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8;&#xAC00; &#xC5C6;&#xB2E4;&#xBA74; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f deploy.yaml
</pre><h3 class="mume-header" id="clusterip-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%ED%99%95%EC%9D%B8">ClusterIP &#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131; &#xBC0F; &#xD655;&#xC778;</h3>

<p><code>svc.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>svc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>deploy
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f svc.yaml
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc myapp-svc
</pre><p>&#xD074;&#xB77C;&#xC774;&#xC5B8;&#xD2B8; &#xD30C;&#xB4DC; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl run myclient --image ghcr.io/c1t1d0s7/network-multitool -it --rm
</pre><p>DNS &#xB808;&#xCF54;&#xB4DC; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">host</span> -t A myapp-svc

myapp-svc.default.svc.cluster.local has address <span class="token number">10.100</span>.147.130
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xC811;&#xC18D; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> myapp-svc.default.svc.cluster.local

<span class="token operator">==</span><span class="token operator">=</span>Version <span class="token number">3.0</span><span class="token operator">==</span><span class="token operator">=</span>
Hello World<span class="token operator">!</span>
myapp-deploy-6db6b9d896-xd2d6
</pre><p>&#xC885;&#xB8CC;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token builtin class-name">exit</span>
</pre><h3 class="mume-header" id="nodeport-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%ED%99%95%EC%9D%B8">NodePort &#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131; &#xBC0F; &#xD655;&#xC778;</h3>

<p><code>svc-np.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>svc<span class="token punctuation">-</span>np
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>deploy
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
    <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30007</span>
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f svc-np.yaml
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc myapp-svc-np
</pre><blockquote>
<p>EC2 &#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC758; &#xBCF4;&#xC548; &#xADF8;&#xB8F9;&#xC5D0;&#xC11C; TCP 30000-32767 &#xD3EC;&#xD2B8;&#xAC00; &#xD5C8;&#xC6A9;&#xB418;&#xC5B4; &#xC788;&#xC5B4;&#xC57C; &#xD568;<br>
&#xBCF4;&#xC548; &#xADF8;&#xB8F9; &#xC774;&#xB984;: <code>eks-cluster-sg-&lt;CLUSTER_NAME&gt;-&lt;RANDOM&gt;</code></p>
</blockquote>
<p>&#xB178;&#xB4DC; IP &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get nodes -o wide
</pre><p>&#xC811;&#xC18D; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://X.X.X.X:30007
</pre><pre data-role="codeBlock" data-info="text" class="language-text">===Version 3.0===
Hello World!
myapp-deploy-6db6b9d896-7qfdr
</pre><h3 class="mume-header" id="loadbalancer-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%ED%99%95%EC%9D%B8">LoadBalancer &#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131; &#xBC0F; &#xD655;&#xC778;</h3>

<p><code>svc-lb.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>svc<span class="token punctuation">-</span>lb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>deploy
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create -f svc-lb.yaml
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc myapp-svc-lb
</pre><p>&#xC11C;&#xBE44;&#xC2A4; &#xC811;&#xC18D; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">curl</span> http://XXX.ap-northeast-2.elb.amazonaws.com

<span class="token operator">==</span><span class="token operator">=</span>Version <span class="token number">3.0</span><span class="token operator">==</span><span class="token operator">=</span>
Hello World<span class="token operator">!</span>
myapp-deploy-6db6b9d896-xd2d6
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-9-bitnamimysql-%EC%B0%A8%ED%8A%B8-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C">&#xC2E4;&#xC2B5; 5-9: bitnami/mysql &#xCC28;&#xD2B8; &#xC124;&#xCE58; &#xBC0F; &#xC5C5;&#xADF8;&#xB808;&#xC774;&#xB4DC;</h2>

<h3 class="mume-header" id="helm-%EB%AA%85%EB%A0%B9-%EC%84%A4%EC%B9%98">helm &#xBA85;&#xB839; &#xC124;&#xCE58;</h3>

<p><a href="https://helm.sh/docs/intro/install/">https://helm.sh/docs/intro/install/</a></p>
<h3 class="mume-header" id="bitnami-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%B6%94%EA%B0%80">bitnami &#xC800;&#xC7A5;&#xC18C; &#xCD94;&#xAC00;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo <span class="token function">add</span> bitnami https://charts.bitnami.com/bitnami
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo update
</pre><h3 class="mume-header" id="mysql-%EC%B0%A8%ED%8A%B8-%EC%84%A4%EC%B9%98">mysql &#xCC28;&#xD2B8; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">helm search repo bitnami/mysql
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">install</span> mydb bitnami/mysql
</pre><h3 class="mume-header" id="%EB%A6%B4%EB%A6%AC%EC%8A%A4-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C">&#xB9B4;&#xB9AC;&#xC2A4; &#xC5C5;&#xADF8;&#xB808;&#xC774;&#xB4DC;</h3>

<p><code>mysql-custom.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">auth</span><span class="token punctuation">:</span>
  <span class="token key atrule">rootPassword</span><span class="token punctuation">:</span> P@ssw0rd
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">helm upgrade mydb bitnami/mysql -f mysql-custom.yaml
</pre><h3 class="mume-header" id="%EB%A6%B4%EB%A6%AC%EC%8A%A4-%EB%A1%A4%EB%B0%B1">&#xB9B4;&#xB9AC;&#xC2A4; &#xB864;&#xBC31;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">history</span> mydb
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">helm rollback mydb <span class="token number">1</span>
</pre><h3 class="mume-header" id="%EB%A6%B4%EB%A6%AC%EC%8A%A4-%EC%82%AD%EC%A0%9C">&#xB9B4;&#xB9AC;&#xC2A4; &#xC0AD;&#xC81C;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">helm uninstall mydb
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-10-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%97%90-%ED%97%AC%EB%A6%84%EC%9C%BC%EB%A1%9C-%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%84%A4%EC%B9%98">&#xC2E4;&#xC2B5; 5-10: &#xCFE0;&#xBC84;&#xB124;&#xD2F0;&#xC2A4;&#xC5D0; &#xD5EC;&#xB984;&#xC73C;&#xB85C; &#xC820;&#xD0A8;&#xC2A4; &#xC124;&#xCE58;</h2>

<h3 class="mume-header" id="%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">&#xB124;&#xC784;&#xC2A4;&#xD398;&#xC774;&#xC2A4; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create namespace jenkins
</pre><h3 class="mume-header" id="%ED%97%AC%EB%A6%84-%EC%B0%A8%ED%8A%B8-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%B6%94%EA%B0%80">&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xC800;&#xC7A5;&#xC18C; &#xCD94;&#xAC00;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo <span class="token function">add</span> jenkinsci https://charts.jenkins.io
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo update
</pre><h3 class="mume-header" id="%ED%97%AC%EB%A6%84-%EC%B0%A8%ED%8A%B8-%EC%82%AC%EC%9A%A9%EC%9E%90%ED%99%94-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1">&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xC0AC;&#xC6A9;&#xC790;&#xD654; &#xD30C;&#xC77C; &#xC0DD;&#xC131;</h3>

<p><code>jenkins-values.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">controller</span><span class="token punctuation">:</span>
  <span class="token key atrule">tag</span><span class="token punctuation">:</span> <span class="token string">&quot;lts-jdk11&quot;</span>
  <span class="token key atrule">serviceType</span><span class="token punctuation">:</span> LoadBalancer
  <span class="token key atrule">installPlugins</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> kubernetes
  <span class="token punctuation">-</span> workflow<span class="token punctuation">-</span>aggregator
  <span class="token punctuation">-</span> git
  <span class="token punctuation">-</span> configuration<span class="token punctuation">-</span>as<span class="token punctuation">-</span>code
  <span class="token punctuation">-</span> pipeline<span class="token punctuation">-</span>stage<span class="token punctuation">-</span>view
  <span class="token key atrule">adminPassword</span><span class="token punctuation">:</span> <span class="token string">&quot;P@ssw0rd&quot;</span>

<span class="token key atrule">persistence</span><span class="token punctuation">:</span>
  <span class="token key atrule">storageClass</span><span class="token punctuation">:</span> <span class="token string">&quot;gp2&quot;</span>
</pre><h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%84%A4%EC%B9%98">&#xC820;&#xD0A8;&#xC2A4; &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">install</span> jenkins jenkinsci/jenkins -n jenkins -f jenkins-values.yaml
</pre><h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%A0%91%EC%86%8D">&#xC820;&#xD0A8;&#xC2A4; &#xC811;&#xC18D;</h3>

<p>&#xC11C;&#xBE44;&#xC2A4; &#xC8FC;&#xC18C; &#xD655;&#xC778;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc -n jenkins jenkins
</pre><p>&#xC6F9; &#xBE0C;&#xB77C;&#xC6B0;&#xC800;:</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://XXX.ap-northeast-2.elb.amazonaws.com:8080
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-11-%EC%A0%A0%ED%82%A8%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EC%83%9D%EC%84%B1">&#xC2E4;&#xC2B5; 5-11: &#xC820;&#xD0A8;&#xC2A4; &#xD14C;&#xC2A4;&#xD2B8; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xC0DD;&#xC131;</h2>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>kube_test_pipeline</code></li>
<li><code>Pipeline</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>Pipeline
<ul>
<li>Definition: <code>Pipeline script</code>
<ul>
<li>Script: <code>Declarative (Kubernetes)</code></li>
</ul>
</li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
<li><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></li>
<li>Build History: <code>#1</code> &gt; <code>Console Output</code> &#xD655;&#xC778;</li>
<li>&#xC791;&#xC5C5;&#xACF5;&#xAC04; &#xD655;&#xC778;</li>
</ul>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy"><span class="token comment">// Uses Declarative syntax to run commands inside a container.</span>
pipeline <span class="token punctuation">{</span>
    agent <span class="token punctuation">{</span>
        kubernetes <span class="token punctuation">{</span>
            yaml <span class="token string">&apos;&apos;&apos;
apiVersion: v1
kind: Pod
spec:
  containers:
  - name: shell
    image: ubuntu
    command:
    - sleep
    args:
    - infinity
&apos;&apos;&apos;</span>
            defaultContainer <span class="token string">&apos;shell&apos;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    stages <span class="token punctuation">{</span>
        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Main&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            steps <span class="token punctuation">{</span>
                sh <span class="token string">&apos;hostname&apos;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-12-kaniko%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B5%AC%EC%84%B1">&#xC2E4;&#xC2B5; 5-12: kaniko&#xB97C; &#xC774;&#xC6A9;&#xD55C; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xAD6C;&#xC131;</h2>

<h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%83%9D%EC%84%B1-4">&#xC791;&#xC5C5; &#xC0DD;&#xC131;</h3>

<p><code>Dashboard &gt; &#xC0C8;&#xB85C;&#xC6B4; Item</code></p>
<ul>
<li>&#xC544;&#xC774;&#xD15C; &#xC774;&#xB984;: <code>kube_pipeline</code></li>
<li><code>Pipeline</code> &#xC120;&#xD0DD; &gt; <code>OK</code>
<ul>
<li>Pipeline
<ul>
<li>Definition: <code>Pipeline script from SCM</code>
<ul>
<li>SCM: <code>Git</code>
<ul>
<li>Repository URL: <code>&lt;YOUR_REPOSITORY&gt;</code></li>
<li>Branch Scpecifier: <code>*/main</code></li>
</ul>
</li>
<li>Script Path: <code>Jenkinsfile-kubernetes</code></li>
</ul>
</li>
</ul>
</li>
<li><code>&#xC800;&#xC7A5;</code></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="jenkinsfile-%EC%83%9D%EC%84%B1-1">Jenkinsfile &#xC0DD;&#xC131;</h3>

<p>&#xC9C4;&#xD589;&#xD560; &#xC791;&#xC5C5;:</p>
<ol>
<li>Git &#xC800;&#xC7A5;&#xC18C; &#xAC00;&#xC838;&#xC624;&#xAE30;</li>
<li>Maven &#xBE4C;&#xB4DC;</li>
<li>Maven &#xD14C;&#xC2A4;&#xD2B8;</li>
<li>kaniko &#xC774;&#xBBF8;&#xC9C0; &#xBE4C;&#xB4DC;/&#xD478;&#xC2DC;
<ul>
<li>kaniko &#xCEE8;&#xD14C;&#xC774;&#xB108;&#xAC00; &#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C; &#xB808;&#xC9C0;&#xC2A4;&#xD2B8;&#xB9AC;&#xC5D0; &#xC774;&#xBBF8;&#xC9C0;&#xB97C; &#xD478;&#xC2DC;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xC2DC;&#xD06C;&#xB9BF; &#xD544;&#xC694;</li>
</ul>
</li>
</ol>
<p><code>Jenkinsfile-kubernetes</code></p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent <span class="token punctuation">{</span>
    kubernetes <span class="token punctuation">{</span>
      yaml <span class="token string">&apos;&apos;&apos;
apiVersion: v1
kind: Pod
spec:
  containers:
  - name: maven
    image: maven:3.8.6-openjdk-8
    command:
    - sleep
    args:
    - infinity
  - name: kaniko
    image: gcr.io/kaniko-project/executor:debug
    command:
    - sleep
    args:
    - infinity
    volumeMounts:
    - name: registry-credentials
      mountPath: /kaniko/.docker
  volumes:
  - name: registry-credentials
    secret:
      secretName: regcred
      items:
      - key: .dockerconfigjson
        path: config.json
&apos;&apos;&apos;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Checkout&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;maven&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          git branch<span class="token punctuation">:</span> <span class="token string">&apos;main&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;&lt;URL&gt;&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;maven&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;mvn clean package -DskipTests=true&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Test&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;maven&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;mvn test&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build &amp; Tag &amp; Push Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;kaniko&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;executor --context=dir:///home/jenkins/agent/workspace/kube_pipeline/ --destination=&lt;IMAGE&gt;:$BUILD_NUMBER --destination=&lt;IMAGE&gt;:latest&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%ED%97%88%EB%B8%8C-%EC%95%A1%EC%84%B8%EC%8A%A4-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1-1">&#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C; &#xC561;&#xC138;&#xC2A4; &#xD1A0;&#xD070; &#xC0DD;&#xC131;</h3>

<p><a href="https://hub.docker.com">https://hub.docker.com</a> &#xB85C;&#xADF8;&#xC778;</p>
<ul>
<li>&#xC6B0;&#xCE21; &#xC0C1;&#xB2E8; &#xACC4;&#xC815; &#xC120;&#xD0DD;</li>
<li>Account Settings
<ul>
<li>Security
<ul>
<li><code>New Access Token</code>
<ul>
<li>Acess Token Description: <code>for jenkins with kubernetes</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>&#xD1A0;&#xD070; &#xBCF5;&#xC0AC;</li>
</ul>
<h3 class="mume-header" id="%EB%8F%84%EC%BB%A4-%ED%97%88%EB%B8%8C-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC%EC%97%90-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A5%BC-%ED%91%B8%EC%8B%9C%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%8B%9C%ED%81%AC%EB%A6%BF-%EC%83%9D%EC%84%B1">&#xB3C4;&#xCEE4; &#xD5C8;&#xBE0C; &#xB808;&#xC9C0;&#xC2A4;&#xD2B8;&#xB9AC;&#xC5D0; &#xC774;&#xBBF8;&#xC9C0;&#xB97C; &#xD478;&#xC2DC;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xC2DC;&#xD06C;&#xB9BF; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create secret docker-registry regcred -n jenkins --docker-server<span class="token operator">=</span>https://index.docker.io/v1/ --docker-username<span class="token operator">=</span><span class="token operator">&lt;</span>DOCKER_HUB_ACCOUNR<span class="token operator">&gt;</span> --docker-password<span class="token operator">=</span><span class="token operator">&lt;</span>DOCKER_HUB_TOKEN<span class="token operator">&gt;</span>
</pre><h3 class="mume-header" id="jenkinsfile-%ED%91%B8%EC%8B%9C">Jenkinsfile &#xD478;&#xC2DC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%8B%A4%ED%96%89-%EB%B0%8F-%ED%99%95%EC%9D%B8">&#xC791;&#xC5C5; &#xC2E4;&#xD589; &#xBC0F; &#xD655;&#xC778;</h3>

<p><code>Dashboard &gt; kube_pipeline</code></p>
<ul>
<li><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-13-argo-cd-%EC%84%A4%EC%B9%98">&#xC2E4;&#xC2B5; 5-13: Argo CD &#xC124;&#xCE58;</h2>

<p><a href="https://argo-cd.readthedocs.io/en/stable/getting_started/">https://argo-cd.readthedocs.io/en/stable/getting_started/</a></p>
<h3 class="mume-header" id="argocd-%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">argocd &#xB124;&#xC784;&#xC2A4;&#xD398;&#xC774;&#xC2A4; &#xC0DD;&#xC131;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create namespace argocd
</pre><h3 class="mume-header" id="argo-cd-%EC%84%A4%EC%B9%98">Argo CD &#xC124;&#xCE58;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
</pre><h3 class="mume-header" id="%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%83%80%EC%9E%85-%EB%B3%80%EA%B2%BD">&#xC11C;&#xBE44;&#xC2A4; &#xD0C0;&#xC785; &#xBCC0;&#xACBD;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl patch svc argocd-server -n argocd -p <span class="token string">&apos;{&quot;spec&quot;: {&quot;type&quot;: &quot;LoadBalancer&quot;}}&apos;</span>
</pre><h3 class="mume-header" id="%EC%A0%91%EC%86%8D-%EC%A3%BC%EC%86%8C-%ED%99%95%EC%9D%B8">&#xC811;&#xC18D; &#xC8FC;&#xC18C; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc argocd-server -n argocd
</pre><h3 class="mume-header" id="%EC%B4%88%EA%B8%B0-%ED%8C%A8%EC%8A%A4%EC%9B%8C%EB%93%9C-%ED%99%95%EC%9D%B8">&#xCD08;&#xAE30; &#xD328;&#xC2A4;&#xC6CC;&#xB4DC; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl -n argocd get secret argocd-initial-admin-secret -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.data.password}&quot;</span> <span class="token operator">|</span> base64 -d<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span>
</pre><p>&#xC6F9; &#xBE0C;&#xB77C;&#xC6B0;&#xC800;:</p>
<pre data-role="codeBlock" data-info="text" class="language-text">http://XXX
</pre><p>Username: admin<br>
Password: XXX</p>
<blockquote>
<p>&#xC790;&#xCCB4; &#xC11C;&#xBA85; &#xC778;&#xC99D;&#xC11C;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xAE30; &#xB54C;&#xBB38;&#xC5D0; &#xC778;&#xC99D;&#xC11C; &#xC624;&#xB958; &#xBC1C;&#xC0DD;</p>
</blockquote>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-14-argo-cd-%EC%83%98%ED%94%8C-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B0%B0%ED%8F%AC">&#xC2E4;&#xC2B5; 5-14: Argo CD &#xC0D8;&#xD50C; &#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xBC30;&#xD3EC;</h2>

<p><a href="https://argo-cd.readthedocs.io/en/stable/getting_started/#creating-apps-via-ui">https://argo-cd.readthedocs.io/en/stable/getting_started/#creating-apps-via-ui</a></p>
<ul>
<li>Git &#xC800;&#xC7A5;&#xC18C;: <a href="https://github.com/argoproj/argocd-example-apps.git">https://github.com/argoproj/argocd-example-apps.git</a></li>
<li>&#xACBD;&#xB85C;: guestbook</li>
</ul>
<h3 class="mume-header" id="argo-cd-%EB%A1%9C%EA%B7%B8%EC%9D%B8">Argo CD &#xB85C;&#xADF8;&#xC778;</h3>

<h3 class="mume-header" id="%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%83%9D%EC%84%B1">&#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xC0DD;&#xC131;</h3>

<p><code>Applications &gt; + NEW APP</code></p>
<ul>
<li>GENERAL
<ul>
<li>Application Name: <code>guestbook</code></li>
<li>Project: <code>default</code></li>
<li>SYNC POLICY: <code>Automatic</code></li>
</ul>
</li>
<li>SOURCE
<ul>
<li>Repository URL: <code>https://github.com/argoproj/argocd-example-apps.git</code></li>
<li>Path: <code>guestbook</code></li>
</ul>
</li>
<li>DESTINATION
<ul>
<li>Cluster URL: <code>https://kubernetes.default.svc</code></li>
<li>Namespace: <code>default</code></li>
</ul>
</li>
<li><code>CREATE</code></li>
</ul>
<h3 class="mume-header" id="%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%99%95%EC%9D%B8">&#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xD655;&#xC778;</h3>

<p><code>argocd/guestbook</code> &#xC120;&#xD0DD;</p>
<h3 class="mume-header" id="%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%ED%99%95%EC%9D%B8">&#xCFE0;&#xBC84;&#xB124;&#xD2F0;&#xC2A4; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get all
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-15-argo-cd%EB%A5%BC-%EC%9C%84%ED%95%9C-git-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%83%9D%EC%84%B1">&#xC2E4;&#xC2B5; 5-15: Argo CD&#xB97C; &#xC704;&#xD55C; Git &#xC800;&#xC7A5;&#xC18C; &#xC0DD;&#xC131;</h2>

<p>&#xC18C;&#xC2A4; &#xBE4C;&#xB4DC; &#xBC0F; &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xC774;&#xBBF8;&#xC9C0;&#xB85C; &#xBE4C;&#xB4DC;&#xD55C; &#xC774;&#xBBF8;&#xC9C0;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xB294; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC0DD;&#xC131;</p>
<ul>
<li>&#xB514;&#xD50C;&#xB85C;&#xC774;&#xBA3C;&#xD2B8;</li>
<li>&#xC11C;&#xBE44;&#xC2A4;</li>
</ul>
<h3 class="mume-header" id="github-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%86%8C%EC%8A%A4-%ED%91%B8%EC%8B%9C">GitHub &#xC800;&#xC7A5;&#xC18C; &#xC0DD;&#xC131; &#xBC0F; &#xC18C;&#xC2A4; &#xD478;&#xC2DC;</h3>

<p><a href="https://github.com/">https://github.com/</a> &#xB85C;&#xADF8;&#xC778;</p>
<p><code>New</code> &gt; &#xC0C8;&#xB85C;&#xC6B4; &#xC800;&#xC7A5;&#xC18C; &#xC0DD;&#xC131;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">mkdir</span> ~/<span class="token operator">&lt;</span>DIRECTORY<span class="token operator">&gt;</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/<span class="token operator">&lt;</span>DIRECTORY<span class="token operator">&gt;</span>
</pre><h3 class="mume-header" id="%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1">&#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC0DD;&#xC131;</h3>

<p><code>deployment.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world<span class="token punctuation">-</span>deploy
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world
        <span class="token key atrule">image</span><span class="token punctuation">:</span> &lt;IMAGE<span class="token punctuation">&gt;</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</pre><p><code>service.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world<span class="token punctuation">-</span>svc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> hello<span class="token punctuation">-</span>world
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> init
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> branch -M main
<span class="token function">git</span> remote <span class="token function">add</span> origin <span class="token operator">&lt;</span>URL<span class="token operator">&gt;</span>
<span class="token function">git</span> push -u origin main
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-16-argo-cd%EB%A5%BC-%EC%9C%84%ED%95%9C-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B0%9C%EC%84%A0">&#xC2E4;&#xC2B5; 5-16: Argo CD&#xB97C; &#xC704;&#xD55C; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xAC1C;&#xC120;</h2>

<p><code>&#xC2E4;&#xC2B5; 5-12: kaniko&#xB97C; &#xC774;&#xC6A9;&#xD55C; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xAD6C;&#xC131;</code> &#xC2E4;&#xC2B5; &#xD30C;&#xC774;&#xD504;&#xB77C;&#xC778; &#xAC1C;&#xC120;</p>
<p>&#xC9C4;&#xD589;&#xD560; &#xC791;&#xC5C5;:</p>
<ol>
<li>Git &#xC800;&#xC7A5;&#xC18C; &#xAC00;&#xC838;&#xC624;&#xAE30;</li>
<li>Maven &#xBE4C;&#xB4DC;</li>
<li>Maven &#xD14C;&#xC2A4;&#xD2B8;</li>
<li>kaniko &#xC774;&#xBBF8;&#xC9C0; &#xBE4C;&#xB4DC;/&#xD478;&#xC2DC;</li>
<li><strong>&#xCFE0;&#xBC84;&#xB124;&#xD2F0;&#xC2A4; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xC218;&#xC815;(&#xD0DC;&#xADF8; &#xC218;&#xC815;) &#xBC0F; GitHub &#xC800;&#xC7A5;&#xC18C; &#xD478;&#xC2DC;</strong></li>
</ol>
<p><code>Jenkinsfile-kubernetes</code></p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent <span class="token punctuation">{</span>
    kubernetes <span class="token punctuation">{</span>
      yaml <span class="token string">&apos;&apos;&apos;
apiVersion: v1
kind: Pod
spec:
  containers:
  - name: maven
    image: maven:3.8.6-openjdk-8
    command:
    - sleep
    args:
    - infinity
  - name: git
    image: alpine/git
    command:
    - sleep
    args:
    - infinity
  - name: kaniko
    image: gcr.io/kaniko-project/executor:debug
    command:
    - sleep
    args:
    - infinity
    volumeMounts:
    - name: registry-credentials
      mountPath: /kaniko/.docker
  volumes:
  - name: registry-credentials
    secret:
      secretName: regcred
      items:
      - key: .dockerconfigjson
        path: config.json
&apos;&apos;&apos;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Checkout&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;maven&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          git branch<span class="token punctuation">:</span> <span class="token string">&apos;main&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&apos;&lt;URL&gt;&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;maven&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;mvn clean package -DskipTests=true&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Test&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;maven&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;mvn test&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Build &amp; Tag &amp; Push Docker Image&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;kaniko&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string">&apos;executor --context=dir:///home/jenkins/agent/workspace/kube_pipeline/ --destination=&lt;IMAGE&gt;:$BUILD_NUMBER --destination=&lt;IMAGE&gt;:latest&apos;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&apos;Update K8s Manifests &amp; Push&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      environment <span class="token punctuation">{</span>
        githubUser <span class="token operator">=</span> <span class="token string">&apos;&lt;GITHUB_YOURNAME&gt;&apos;</span> <span class="token comment">//Ryan Jang</span>
        githubEmail <span class="token operator">=</span> <span class="token string">&apos;&lt;GITHUB_EMAIL&gt;&apos;</span> <span class="token comment">//c1t1d0s7@example.com</span>
        githubId <span class="token operator">=</span> <span class="token string">&apos;&lt;GITHUB_USERNAME&gt;&apos;</span> <span class="token comment">//c1t1d0s7 </span>
        githubRepo <span class="token operator">=</span> <span class="token string">&apos;&lt;GITHUB_REPO_NAME&gt;&apos;</span> <span class="token comment">//jenkins-kube-deploy</span>
        githubURL <span class="token operator">=</span> <span class="token string">&quot;https://github.com/${githubId}/${githubRepo}.git&quot;</span>
        dockerhubId <span class="token operator">=</span> <span class="token string">&apos;&lt;DOCKER_HUB_USERNAME&gt;&apos;</span> <span class="token comment">//c1t1d0s7</span>
        dockerhubRepo <span class="token operator">=</span> <span class="token string">&apos;&lt;DOCKER_HUB_REPO_NAME&gt;&apos;</span> <span class="token comment">//hello-world</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        <span class="token function">container</span><span class="token punctuation">(</span><span class="token string">&apos;git&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          git branch<span class="token punctuation">:</span> <span class="token string">&apos;main&apos;</span><span class="token punctuation">,</span> credentialsId<span class="token punctuation">:</span> <span class="token string">&apos;github-credential&apos;</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">&quot;${githubURL}&quot;</span>
          sh <span class="token string">&quot;git config --global --add safe.directory ${workspace}&quot;</span>
          sh <span class="token string">&quot;git config --global user.name ${githubUser}&quot;</span>
          sh <span class="token string">&quot;git config --global user.email ${githubEmail}&quot;</span>
          sh <span class="token string">&apos;sed -i &quot;s/image:.*/image: ${dockerhubId}\\/${dockerhubRepo}:${BUILD_NUMBER}/g&quot; deployment.yaml&apos;</span>
          sh <span class="token string">&apos;git add deployment.yaml&apos;</span>
          sh <span class="token string">&apos;git commit -m &quot;Jenkins Build Number - ${BUILD_NUMBER}&quot;&apos;</span>
          <span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">gitUsernamePassword</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">&apos;github-credential&apos;</span><span class="token punctuation">,</span> gitToolName<span class="token punctuation">:</span> <span class="token string">&apos;Default&apos;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sh <span class="token string">&apos;git push --set-upstream origin main&apos;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="github-%ED%91%B8%EC%8B%9C%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%9D%B8%EC%A6%9D-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1">Github &#xD478;&#xC2DC;&#xB97C; &#xC704;&#xD55C; &#xC778;&#xC99D; &#xD1A0;&#xD070; &#xC0DD;&#xC131;</h3>

<p><code>Github &#xC0AC;&#xC774;&#xD2B8; &gt; &#xC6B0;&#xCE21; &#xC0C1;&#xB2E8; &#xACC4;&#xC815; &#xC544;&#xC774;&#xCF58; &gt; Settings &gt; Developer settings</code></p>
<p>&#xB610;&#xB294; <a href="https://github.com/settings/apps">https://github.com/settings/apps</a></p>
<p><code>Personal access tokens &gt; Generate new token &gt; Generate new token (classic)</code></p>
<ul>
<li>Note: <code>Kubernetes Deploy for Argo CD</code></li>
<li>Expiration: &#xC801;&#xC808;&#xD558;&#xAC8C; &#xC120;&#xD0DD;</li>
<li>Select scopes
<ul>
<li><code>repo</code> &#xCCB4;&#xD06C;</li>
</ul>
</li>
<li><code>Generate token</code></li>
</ul>
<p>&#xD1A0;&#xD070; &#xBCF5;&#xC0AC;</p>
<h3 class="mume-header" id="%EC%A0%A0%ED%82%A8%EC%8A%A4-%EC%9E%90%EA%B2%A9%EC%A6%9D%EB%AA%85-%EC%83%9D%EC%84%B1">&#xC820;&#xD0A8;&#xC2A4; &#xC790;&#xACA9;&#xC99D;&#xBA85; &#xC0DD;&#xC131;</h3>

<p><code>Dashboard &gt; Jenkins &#xAD00;&#xB9AC; &gt; Manage Credentials &gt; (global) &gt; Add Credentials</code></p>
<ul>
<li>Kind: <code>Username with password</code>
<ul>
<li>Username: <code>&lt;GITHUB_USERNAME&gt;</code></li>
<li>Password: <code>&lt;GITHUB_TOKEN&gt;</code></li>
<li>ID: <code>github-credential</code></li>
</ul>
</li>
<li><code>Create</code></li>
</ul>
<h3 class="mume-header" id="jenkinsfile-%ED%91%B8%EC%8B%9C-1">Jenkinsfile &#xD478;&#xC2DC;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><h3 class="mume-header" id="%EC%9E%91%EC%97%85-%EC%8B%A4%ED%96%89-%EB%B0%8F-%ED%99%95%EC%9D%B8-1">&#xC791;&#xC5C5; &#xC2E4;&#xD589; &#xBC0F; &#xD655;&#xC778;</h3>

<p><code>Dashboard &gt; kube_pipeline</code></p>
<ul>
<li><code>&#xC9C0;&#xAE08; &#xBE4C;&#xB4DC;</code></li>
</ul>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-17-%EC%B5%9C%EC%A2%85-argo-cd-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%83%9D%EC%84%B1">&#xC2E4;&#xC2B5; 5-17: &#xCD5C;&#xC885; Argo CD &#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xC0DD;&#xC131;</h2>

<h3 class="mume-header" id="%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%83%9D%EC%84%B1-1">&#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xC0DD;&#xC131;</h3>

<p><code>Applications &gt; + NEW APP</code></p>
<ul>
<li>GENERAL
<ul>
<li>Application Name: <code>hello-world</code></li>
<li>Project: <code>default</code></li>
<li>SYNC POLICY: <code>Automatic</code></li>
</ul>
</li>
<li>SOURCE
<ul>
<li>Repository URL: <code>&lt;URL&gt;</code></li>
<li>Path: <code>.</code></li>
</ul>
</li>
<li>DESTINATION
<ul>
<li>Cluster URL: <code>https://kubernetes.default.svc</code></li>
<li>Namespace: <code>default</code></li>
</ul>
</li>
<li><code>CREATE</code></li>
</ul>
<h3 class="mume-header" id="%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%99%95%EC%9D%B8-1">&#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xD655;&#xC778;</h3>

<p><code>argocd/hello-world</code> &#xC120;&#xD0DD;</p>
<h3 class="mume-header" id="%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%ED%99%95%EC%9D%B8-1">&#xCFE0;&#xBC84;&#xB124;&#xD2F0;&#xC2A4; &#xC624;&#xBE0C;&#xC81D;&#xD2B8; &#xD655;&#xC778;</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get all
</pre><h3 class="mume-header" id="%EC%B5%9C%EC%A2%85%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%86%8C%EC%8A%A4-%EC%BD%94%EB%93%9C-%EB%B3%80%EA%B2%BD-%EC%8B%9C-cicd%EA%B0%80-%EC%A0%81%EC%A0%88%ED%95%98%EA%B2%8C-%EC%9D%B4%EB%A3%A8%EC%96%B4-%EC%A7%80%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8">&#xCD5C;&#xC885;&#xC801;&#xC73C;&#xB85C; &#xC18C;&#xC2A4; &#xCF54;&#xB4DC; &#xBCC0;&#xACBD; &#xC2DC; CI/CD&#xAC00; &#xC801;&#xC808;&#xD558;&#xAC8C; &#xC774;&#xB8E8;&#xC5B4; &#xC9C0;&#xB294;&#xC9C0; &#xD655;&#xC778;</h3>

<p>JAVA &#xC18C;&#xC2A4;&#xCF54;&#xB4DC; &#xD30C;&#xC77C; &#xC218;&#xC815;</p>
<p><code>src/main/webapp/WEB-INF/views/index.jsp</code></p>
<pre data-role="codeBlock" data-info="html" class="language-html">&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot;%&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>${msg}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Today is <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fmt:</span>formatDate</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${today}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Version: 2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</pre><pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token operator">&lt;</span>MESSAGE<span class="token operator">&gt;</span>
<span class="token function">git</span> push
</pre><hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-18-%ED%94%84%EB%A1%9C%EB%A9%94%ED%85%8C%EC%9A%B0%EC%8A%A4-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%ED%99%95%EC%9D%B8">&#xC2E4;&#xC2B5; 5-18: &#xD504;&#xB85C;&#xBA54;&#xD14C;&#xC6B0;&#xC2A4; &#xC124;&#xCE58; &#xBC0F; &#xB300;&#xC2DC;&#xBCF4;&#xB4DC; &#xD655;&#xC778;</h2>

<p>&#xB124;&#xC784;&#xC2A4;&#xD398;&#xC774;&#xC2A4; &#xC0DD;&#xC131;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create namespace monitor
</pre><p>&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xC800;&#xC7A5;&#xC18C; &#xCD94;&#xAC00;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo <span class="token function">add</span> prometheus-community https://prometheus-community.github.io/helm-charts
</pre><p>&#xCC28;&#xD2B8; &#xBAA9;&#xB85D; &#xC5C5;&#xB370;&#xC774;&#xD2B8;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo update
</pre><p>&#xCC28;&#xD2B8; &#xC0AC;&#xC6A9;&#xC790;&#xD654; &#xD30C;&#xB77C;&#xBBF8;&#xD130; &#xD30C;&#xC77C; &#xC0DD;&#xC131;:</p>
<p><code>prometheus-grafana.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"><span class="token key atrule">grafana</span><span class="token punctuation">:</span>
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer
</pre><p>&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">install</span> prom prometheus-community/kube-prometheus-stack -f prometheus-grafana.yaml -n monitor
</pre><p>&#xD504;&#xB85C;&#xBA54;&#xD14C;&#xC6B0;&#xC2A4; &#xC11C;&#xBE44;&#xC2A4; &#xC8FC;&#xC18C; &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc prom-grafana -n monitor
</pre><p>ID: admin<br>
&#xD328;&#xC2A4;&#xC6CC;&#xB4DC;: prom-operator</p>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-19-efk-%EC%84%A4%EC%B9%98-%EB%B0%8F-kibana-%EB%A1%9C%EA%B7%B8-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EB%B0%8F-%EB%A1%9C%EA%B7%B8-%ED%99%95%EC%9D%B8">&#xC2E4;&#xC2B5; 5-19: EFK &#xC124;&#xCE58; &#xBC0F; Kibana &#xB85C;&#xADF8; &#xC778;&#xB371;&#xC2F1; &#xBC0F; &#xB85C;&#xADF8; &#xD655;&#xC778;</h2>

<h3 class="mume-header" id="elasticsearch-%EC%84%A4%EC%B9%98">Elasticsearch &#xC124;&#xCE58;</h3>

<p>logging &#xB124;&#xC784;&#xC2A4;&#xD398;&#xC774;&#xC2A4; &#xC0DD;&#xC131;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl create namespace logging
</pre><p>&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xCD94;&#xAC00;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo <span class="token function">add</span> elastic https://helm.elastic.co
</pre><p>&#xCC28;&#xD2B8; &#xBAA9;&#xB85D; &#xC5C5;&#xB370;&#xC774;&#xD2B8;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo update
</pre><p>&#xCC28;&#xD2B8; &#xD30C;&#xB77C;&#xBBF8;&#xD130; &#xC800;&#xC7A5;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm show values elastic/elasticsearch <span class="token operator">&gt;</span> elasticsearch-value.yaml
</pre><p>&#xCC28;&#xD2B8; &#xD30C;&#xB77C;&#xBBF8;&#xD130; &#xC218;&#xC815;:</p>
<p><code>elasticsearch-value.yaml</code></p>
<pre data-role="codeBlock" data-info="yml" class="language-yaml"> <span class="token key atrule">18 replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
 <span class="token key atrule">19 minimumMasterNodes</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token punctuation">...</span>
 <span class="token key atrule">80 resources</span><span class="token punctuation">:</span>
 <span class="token key atrule">81   requests</span><span class="token punctuation">:</span>
 <span class="token key atrule">82     cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;1000m&quot;</span>
 <span class="token key atrule">83     memory</span><span class="token punctuation">:</span> <span class="token string">&quot;1Gi&quot;</span>
 <span class="token key atrule">84   limits</span><span class="token punctuation">:</span>
 <span class="token key atrule">85     cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;1000m&quot;</span>
 <span class="token key atrule">86     memory</span><span class="token punctuation">:</span> <span class="token string">&quot;1Gi&quot;</span>
</pre><p>&#xCC28;&#xD2B8; &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">install</span> elasticsearch elastic/elasticsearch -f elasticsearch-value.yaml -n logging
</pre><h3 class="mume-header" id="fluentbit-%EC%84%A4%EC%B9%98">FluentBit &#xC124;&#xCE58;</h3>

<p>&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xCD94;&#xAC00;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo <span class="token function">add</span> fluent https://fluent.github.io/helm-charts
</pre><p>&#xCC28;&#xD2B8; &#xBAA9;&#xB85D; &#xC5C5;&#xB370;&#xC774;&#xD2B8;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm repo update
</pre><p>&#xD5EC;&#xB984; &#xCC28;&#xD2B8; &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">install</span> fluent-bit fluent/fluent-bit -n logging
</pre><h3 class="mume-header" id="kibana-%EC%84%A4%EC%B9%98">Kibana &#xC124;&#xCE58;</h3>

<p>&#xCC28;&#xD2B8; &#xD30C;&#xB77C;&#xBBF8;&#xD130; &#xC800;&#xC7A5; &#xBC0F; &#xC218;&#xC815;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm show values elastic/kibana <span class="token operator">&gt;</span> kibana-value.yaml
</pre><p><code>kibana-value.yaml</code></p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"> <span class="token number">49</span> resources:
 <span class="token number">50</span>   requests:
 <span class="token number">51</span>     cpu: <span class="token string">&quot;1000m&quot;</span>
 <span class="token number">52</span>     memory: <span class="token string">&quot;1Gi&quot;</span>
 <span class="token number">53</span>   limits:
 <span class="token number">54</span>     cpu: <span class="token string">&quot;1000m&quot;</span>
 <span class="token number">55</span>     memory: <span class="token string">&quot;1Gi&quot;</span>
<span class="token punctuation">..</span>.
<span class="token number">119</span> service:
<span class="token number">120</span>   type: LoadBalancer
</pre><p>&#xCC28;&#xD2B8; &#xC124;&#xCE58;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm <span class="token function">install</span> kibana elastic/kibana -f kibana-value.yaml -n logging
</pre><p>kibana &#xB85C;&#xB4DC;&#xBC38;&#xB7F0;&#xC11C; &#xC11C;&#xBE44;&#xC2A4; &#xC8FC;&#xC18C; &#xD655;&#xC778;:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">kubectl get svc kibana-kibana -n logging
</pre><p>&#xC811;&#xC18D; &#xD3EC;&#xD2B8;: 5601<br>
&#xC2E4;&#xC81C; &#xBCC4;&#xB3C4;&#xC758; &#xC778;&#xC99D;&#xC774; &#xC5C6;&#xAE30; &#xB54C;&#xBB38;&#xC5D0; &#xC678;&#xBD80;&#xC5D0; &#xB178;&#xCD9C;&#xD558;&#xB294; &#xAC83;&#xC740; <strong>&#xC704;&#xD5D8;</strong></p>
<h3 class="mume-header" id="kibana-%EB%A1%9C%EA%B7%B8-%EC%9D%B8%EB%8D%B1%EC%8B%B1">Kibana &#xB85C;&#xADF8; &#xC778;&#xB371;&#xC2F1;</h3>

<ol>
<li>Welcome &#xD398;&#xC774;&#xC9C0;: <code>Explorer on my own</code> &#xBC84;&#xD2BC;</li>
<li>&#xC88C;&#xCE21; &#xC0C1;&#xB2E8; &#xD584;&#xBC84;&#xAC70; &#xB9E4;&#xB274;: Management -&gt; Stack Management &#xC120;&#xD0DD;</li>
<li>Kibana -&gt; Index Patterns &#xC120;&#xD0DD;</li>
<li>Create Index pattern &#xC120;&#xD0DD;</li>
<li>Name: <code>logstash-*</code> &#xC785;&#xB825;</li>
<li>Temestamp filed: <code>@timestamp</code> &#xC120;&#xD0DD;</li>
<li><code>Create index pattern</code> &#xBC84;&#xD2BC;</li>
<li>&#xC88C;&#xCE21; &#xD584;&#xBC84;&#xAC70; &#xBA54;&#xB274; -&gt; Analytics -&gt; Discover</li>
<li>&#xB85C;&#xADF8; &#xAC80;&#xC0C9;</li>
</ol>
<hr>
<h2 class="mume-header" id="%EC%8B%A4%EC%8A%B5-5-20-%EC%8B%A4%EC%8A%B5%ED%99%98%EA%B2%BD%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%B5%9C%EC%A2%85-%EC%A0%95%EB%A6%AC">&#xC2E4;&#xC2B5; 5-20: &#xC2E4;&#xC2B5;&#xD658;&#xACBD;(&#xD074;&#xB77C;&#xC6B0;&#xB4DC;) &#xCD5C;&#xC885; &#xC815;&#xB9AC;</h2>

<p>&#xCFE0;&#xBC84;&#xB124;&#xD2F0;&#xC2A4; &#xC678;&#xBD80; &#xB9AC;&#xC18C;&#xC2A4;(EBS, ELB) &#xB54C;&#xBB38;&#xC5D0; EKS&#xAC00; &#xC0AD;&#xC81C;&#xB418;&#xC9C0; &#xC54A;&#xC74C;</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">helm uninstall mydb
helm uninstall prom -n monitor
helm uninstall kibana -n logging
helm uninstall fluent-bit -n logging
helm uninstall elasticsearch -n logging
helm uninstall jenkins -n jenkins
kubectl delete all --all -n argocd
kubectl delete pvc --all --all-namespaces
eksctl delete cluster --name myeks
</pre><p>EKS &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xC0AD;&#xC81C;&#xC5D0; &#xC57D; 10&#xBD84; &#xC18C;&#xC694;</p>
<hr>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>